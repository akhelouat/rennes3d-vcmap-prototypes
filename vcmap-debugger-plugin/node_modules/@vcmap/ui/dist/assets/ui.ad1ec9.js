
function loadCss(href) {
  return new Promise((resolve, reject) => {
    const elem = document.createElement('link');
    elem.rel = 'stylesheet';
    elem.href = href;
    elem.defer = false;
    elem.async = false;
    elem.onload = resolve;
    elem.onerror = reject;
    document.head.appendChild(elem);
  });
} await loadCss('./assets/ui.ad1ec9.css');var br=Object.defineProperty,yr=Object.defineProperties;var wr=Object.getOwnPropertyDescriptors;var Ve=Object.getOwnPropertySymbols;var Sr=Object.prototype.hasOwnProperty,Er=Object.prototype.propertyIsEnumerable;var Pe=(n,t,e)=>t in n?br(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,E=(n,t)=>{for(var e in t||(t={}))Sr.call(t,e)&&Pe(n,e,t[e]);if(Ve)for(var e of Ve(t))Er.call(t,e)&&Pe(n,e,t[e]);return n},N=(n,t)=>yr(n,wr(t));import A from"./vue.9fd7f6.js";import Tr,{reactive as K,ref as w,computed as O,onMounted as qt,nextTick as $r,onUnmounted as It,inject as nt,isReactive as xr,provide as Ir,watch as zt}from"./vue-composition-api.7051d7.js";import{VcsEvent as rt,MapCollection as Re,ViewPoint as De,Collection as je,ObliqueMap as Ct,CesiumMap as We,OpenlayersMap as Cr,getVcsAppById as Ar,ClassRegistry as Mr,makeOverrideCollection as Be,getObjectFromClassRegistry as Or,IndexedCollection as Fr,VcsApp as Lr,OverrideClassRegistry as Nr,contextIdSymbol as kr,destroyCollection as Ue,Context as Vr,DefaultObliqueCollection as Pr}from"./core.d5ed0f.js";import He,{VSheet as ct,VIcon as Q,VBtn as Jt,VCard as Yt,VList as Ge,VListItemGroup as Rr,VListItem as qe,VListItemAction as Dr,VListItemContent as ze,VListItemTitle as jr,VToolbar as Wr,VToolbarItems as Zt,VAppBar as Br,VContainer as Je,VRow as mt,VCol as Kt,VDivider as Qt,VSlider as Ur,VApp as Hr,VMain as Gr,VFooter as qr,VListItemIcon as zr,VChip as Jr}from"./vuetify.33dafc.js";import{VcsButton as Yr,VcsActionButtonList as Zr,VcsTooltip as Ye,Icons as Kr,VcsTreeview as Qr,VcsSelect as Xr}from"./uicomponents.161461.js";import{ol$math$clamp as ti,ol$Observable$unByKey as ei}from"./ol.abea3a.js";A.config.productionTip=!1,A.use(Tr),window.CESIUM_BASE_URL="./assets/cesium/";var ac="",At,ni=new Uint8Array(16);function ri(){if(!At&&(At=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!At))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return At(ni)}var ii=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function si(n){return typeof n=="string"&&ii.test(n)}for(var I=[],Xt=0;Xt<256;++Xt)I.push((Xt+256).toString(16).substr(1));function oi(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(I[n[t+0]]+I[n[t+1]]+I[n[t+2]]+I[n[t+3]]+"-"+I[n[t+4]]+I[n[t+5]]+"-"+I[n[t+6]]+I[n[t+7]]+"-"+I[n[t+8]]+I[n[t+9]]+"-"+I[n[t+10]]+I[n[t+11]]+I[n[t+12]]+I[n[t+13]]+I[n[t+14]]+I[n[t+15]]).toLowerCase();if(!si(e))throw TypeError("Stringified UUID is invalid");return e}function gt(n,t,e){n=n||{};var r=n.random||(n.rng||ri)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var i=0;i<16;++i)t[e+i]=r[i];return t}return oi(r)}function ai(n,t){if(n!=null){const e=Number.parseFloat(String(n));if(e!=null&&!Number.isNaN(e))return e}return t}function ci(n,t){return n==null?t:typeof n=="boolean"?n:n===1?!0:n===0?!1:typeof n=="string"&&(n.toLowerCase()==="true"||n.toLowerCase()==="1")?!0:typeof n=="string"&&(n.toLowerCase()==="false"||n.toLowerCase()==="0")?!1:t}function li(n,t,e){if(n!=null){const r=Object.values(t).find(i=>i==n);if(r!=null)return r}return e}const bt=[[String,"string"],[Number,"number"],[Boolean,"boolean"],[Function,"function"],[void 0,"undefined"],[Symbol,"symbol"]];function Mt(n){const t={};if(!n||t.toString(n)!=="[object Object]")return!1;const e=Object.getPrototypeOf(n);if(!e)return!0;const r=t.hasOwnProperty,i=r.call(e,"constructor")&&e.constructor;return typeof i=="function"&&r.toString.call(i)===r.toString.call(Object)}function P(n,t){if(n===null)return"null";if(typeof n=="undefined")return"undefined";if(t)return typeof n;let e;if(Array.isArray(n))e=`[${n.map(i=>P(i,t)).join(",")}]`;else try{e=JSON.stringify(n)}catch{e=typeof n}return e=e||typeof n,e.length>20?`${e.substr(0,20)}...`:e}function ui(n,t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"?n===t?!1:`Expected ${P(n)} to equal ${t.toString()}`:null}function fi(n,t,e){if(Array.isArray(t)){if(t.length!==1)throw new Error("Array patterns may only have on type");if(Array.isArray(n)){let r=!1;return n.findIndex(s=>{try{g(s,t[0],e)}catch(o){r=o.message.replace(/Match failed:\s/,"")}return r})>-1?`${r} in ${P(n)}`:!1}return`Expected ${P(n)} to be an Array`}return null}function te(n,t,e){const r=e?`${e}.`:"";if(!Mt(n))return`Expected ${P(n)} to be a plain Object`;let s=!1;const o=Object.keys(t).find(a=>{const l=n[a];if(Mt(t[a]))s=te(l,t[a],r+a);else try{g(l,t[a])}catch(c){s=c.message.replace(/Match failed:\s/,"")}return s});return o?`${s} in object.${r}${o}`:!1}function hi(n,t){if(t===Number)return Number.isFinite(n)?!1:`expected ${P(n)} to be a number, excluding NaN`;for(let e=bt.length;e--;)if(t===bt[e][0])return typeof n===bt[e][1]?!1:`expected ${P(n)} to be a ${bt[e][1]}`;return null}function ee(n){if(n===null)return"null";const t=bt.find(i=>i[0]===n);if(t)return t[1];let e=n.toString();if(n.className)return n.className;const r=e.match(/function (.*)\(/);if(r&&r.length>1)return r[1];if(Mt(n)){const i={};Object.keys(n).forEach(s=>{i[s]=ee(n[s])});try{e=`Object of ${JSON.stringify(i)}`}catch{e="Object"}}return e}function Ze(n,t,e){const r=e?`${e}.`:"";let i=!1;return Object.keys(n).find(o=>{if(Mt(t[o])){const a=n[o];i=Ze(a,t[o],r+o)}else t[o]||(i=`Found additional key ${r}${o}`);return i=i?i.replace(/\sin.*/,""):!1,i})?`${i} in ${P(n)}`:!1}function pi(n,t,e){const r=function(o,a){if(a==null)return o===a?!1:`Expected ${P(o)} to be ${a}`;const l=hi(o,a);if(l!==null)return l;const c=ui(o,a);if(c!==null)return c;if(Array.isArray(a))return fi(o,a,e);if(a instanceof Function)return o instanceof a?!1:`Expected ${P(o,!0)} to be of Type ${ee(a)}`;if(a===Object)return te(o,{});if(typeof a!="object")throw new Error(`Cannot handler pattern ${a}`);const u=te(o,a);return u||(e?Ze(o,a):!1)};let i;return Array.isArray(t)&&t.length>1?t.every(o=>r(n,o))&&(i=`Expected ${P(n)} to be a ${t.map(o=>ee(o)).join(" or ")}`):i=r(n,t),i}function g(n,t,e){const r=pi(n,t,e);if(r)throw new Error(`Match failed: ${r}`);return!1}function lt(n,t,e){const r=[null,void 0];return Array.isArray(t)&&t.length>1?t.forEach(i=>{r.push(i)}):r.push(t),g(n,r.reverse(),e)}const S={OFF:1,ERROR:2,WARN:4,INFO:8,DEBUG:16},G={ERROR:0,WARN:0,INFO:0,DEBUG:0};G.ERROR=S.ERROR|S.WARN|S.INFO|S.DEBUG,G.WARN=S.WARN|S.INFO|S.DEBUG,G.INFO=S.INFO|S.DEBUG,G.DEBUG=S.DEBUG;const yt={useTimestamp:!1,logLevel:S.INFO},wt=new Map;wt.set(S.ERROR,"error"),wt.set(S.WARN,"warn"),wt.set(S.INFO,"info"),wt.set(S.DEBUG,"log");class Ke{constructor(t){this.className=t,this.deprecations=new Map}error(t,...e){yt.logLevel&G.ERROR&&this._log(String(t),S.ERROR,e)}warning(t,...e){yt.logLevel&G.WARN&&this._log(String(t),S.WARN,e)}deprecate(t,e){const r=String(t),i=e?String(e):null;if(!this.deprecations.has(r)){this.deprecations.set(r,i||null);let s=`${r} has been deprecated and will be removed`;i&&(s=`${s}. ${i}`),this.warning(s)}}info(t,...e){yt.logLevel&G.INFO&&this._log(String(t),S.INFO,e)}debug(t,...e){yt.logLevel&G.DEBUG&&this._log(String(t),S.DEBUG,e)}log(t,...e){yt.logLevel&G.DEBUG&&this._log(String(t),S.DEBUG,e)}_log(t,e,r){let i=t;this.className&&(i=`[${this.className}] ${i}`),console[wt.get(e)](i,...r),e&S.ERROR&&(console.group(),console.trace(),console.groupEnd())}}const ne=new Map;let re;function di(){return re||(re=new Ke),re}function _i(n){const t=new Ke(n);return ne.set(n,t),t}function ie(n){return n?ne.has(n)?ne.get(n):_i(n):di()}function Ot(){return ie("plugin-helpers")}const q=Symbol("vcsApp"),it=Symbol("pluginFactory");function vi(n){return g(n,String),/^(?:@[a-z0-9-*~][a-z0-9-*._~]*\/)?[a-z0-9-~][a-z0-9-._~]*$/.test(n)}async function mi(n,t,e,r="https://plugins.virtualcitymap.de/"){let i=e.entry;i?/^(https?:\/\/|\/)/.test(i)?i==="_dev"&&(i=`/${t}.js`):i=`${window.location.origin}${window.location.pathname.replace(/\/?$/,"/")}${i}`:i=`${r.replace(/\/?$/,"")}/${t}/${e.version||"*"}/index.js`;try{let s;if(window.VcsPluginLoaderFunction?s=await window.VcsPluginLoaderFunction(t,i):s=await import(i),s.default==null||typeof s.default!="function")return Ot().error(`plugin ${t} does not provide a default exported function`),null;const o=await s.default(e);return o.name?(o[it]=s.default,o):(Ot().error(`plugin ${t} does not expose a name`),o.destroy&&o.destroy(),null)}catch(s){Ot().error(`failed to load plugin ${t}`),Ot().error(s)}return null}function gi(n){const t=n.toJSON?n.toJSON():{};return n[it]&&(t[it]=n[it]),t}async function bi(n){const t=await n[it](n);return t[it]=n[it],t}const C={STATIC:"static",DYNAMIC_LEFT:"dynamicLeft",DYNAMIC_RIGHT:"dynamicRight",DETACHED:"detached"},R={TOP_LEFT:{left:"0px",top:"0px"},TOP_LEFT2:{left:"320px",top:"0px"},TOP_RIGHT:{right:"0px",top:"0px"},DETACHED:{left:"200px",top:"200px"}};function ut(n){return typeof n=="number"?`${n}px`:n}function Qe(n,t={}){let e=ut(n.left)||"unset";const r=ut(n.right)||"unset";let i=ut(n.top)||"unset";const s=ut(n.bottom)||"unset";let o=ut(n.width)||"auto",a=ut(n.height)||"auto";return e!=="unset"&&r!=="unset"?o="auto":o==="auto"&&(o="320px"),e==="unset"&&r==="unset"&&(e="200px"),i!=="unset"&&s!=="unset"&&(a="auto"),i==="unset"&&s==="unset"&&(i="200px"),Object.assign(t,{left:e,right:r,top:i,bottom:s,width:o,height:a})}function yi(n,t,e="mapElement"){let r=e;typeof r=="string"&&(r=document.getElementsByClassName(e).item(0));const{left:i,top:s}=r.getBoundingClientRect();return{left:n-i,top:t-s}}class Xe{constructor(){this.added=new rt,this.removed=new rt,this.componentIds=K([]),this._windowComponents=new Map}get(t){if(this.has(t))return this._windowComponents.get(t)}has(t){return this._windowComponents.has(t)}remove(t){const e=this._windowComponents.get(t);if(e){const r=this.componentIds.indexOf(t);this.componentIds.splice(r,1),this._windowComponents.delete(t),this._handleSlotsChanged(e.slot.value),this.removed.raiseEvent(e)}}setWindowPositionOptions(t,e){const r=this._windowComponents.get(t);r&&(e===R.TOP_LEFT||e===R.TOP_LEFT2||e===R.TOP_RIGHT||(r.slot.value=C.DETACHED),Qe(e,r.position))}_handleSlotsChanged(t){if(t===C.STATIC){const e=this._findWindowBySlot(C.STATIC),r=this._findWindowBySlot(C.DYNAMIC_LEFT);e&&r?this.setWindowPositionOptions(r.id,R.TOP_LEFT2):!e&&r&&this.setWindowPositionOptions(r.id,R.TOP_LEFT)}}_findWindowBySlot(t){return Array.from(this._windowComponents.values()).find(e=>e.slot.value===t)}_getPositionOptionsForSlot(t,e){return t===C.STATIC?R.TOP_LEFT:t===C.DYNAMIC_LEFT?this._findWindowBySlot(C.STATIC)?R.TOP_LEFT2:R.TOP_LEFT:t===C.DYNAMIC_RIGHT?R.TOP_RIGHT:e||R.DETACHED}_removeWindowAtSlot(t){if(t!==C.DETACHED){const e=this._findWindowBySlot(t);e&&this.remove(e.id)}}add(t,e){var W,Ce,Ae,Me,Oe,Fe,Le,Ne,ke;if(g(e,[String,q]),t.id&&this.has(t.id))throw new Error(`A window with id ${t.id} has already been registered.`);const r=t.id||gt(),i=((W=t.slot)==null?void 0:W.value)||t.slot,s=li(i,C,C.DETACHED),o=this._getPositionOptionsForSlot(s,t.position),a=Qe(o),l=w(s),{component:c,headerComponent:u}=t,f=E({},(Ce=t==null?void 0:t.state)==null?void 0:Ce.styles),h=Array.isArray((Ae=t==null?void 0:t.state)==null?void 0:Ae.classes)?[...(Oe=(Me=t==null?void 0:t.state)==null?void 0:Me.classes)!=null?Oe:[]]:E({},(Fe=t==null?void 0:t.state)==null?void 0:Fe.classes),d=K({id:r,owner:e,hideHeader:!!((Le=t==null?void 0:t.state)==null?void 0:Le.hideHeader),headerTitle:(Ne=t==null?void 0:t.state)==null?void 0:Ne.headerTitle,headerIcon:(ke=t==null?void 0:t.state)==null?void 0:ke.headerIcon,classes:h,styles:f}),_=t.props||{},m=K(a),y={get id(){return r},get state(){return d},get component(){return c},get headerComponent(){return u},get slot(){return l},get position(){return m},get props(){return _}};return this._removeWindowAtSlot(s),this._windowComponents.set(r,y),this.componentIds.push(r),this._handleSlotsChanged(s),this.added.raiseEvent(y),y}bringWindowToTop(t){if(this.has(t)){const e=this.componentIds.indexOf(t);e>=0&&e!==this.componentIds.length-1&&(this.componentIds.push(t),this.componentIds.splice(e,1))}}removeOwner(t){[...this.componentIds].forEach(r=>{const{state:i}=this.get(r);t===i.owner&&this.remove(r)})}clear(){[...this.componentIds].forEach(e=>{this.remove(e)})}destroy(){this.added.destroy(),this.removed.destroy(),this.componentIds.splice(0),this._windowComponents.clear()}}function wi(n,t,e=[]){const r=[q,...e];return r.indexOf(t.owner)-r.indexOf(n.owner)}function Si(n,t,e=[],r=wi){return n.filter(i=>i.location===t).sort((i,s)=>r(i,s,e)).map(i=>i.action)}const z={MAP:0,CONTENT:1,TOOL:2,PROJECT:3,MENU:4};class tn{constructor(){this.added=new rt,this.removed=new rt,this.componentIds=K([]),this._buttonComponents=new Map}get(t){if(this.has(t))return this._buttonComponents.get(t)}has(t){return this._buttonComponents.has(t)}remove(t){const e=this._buttonComponents.get(t);if(e){const r=this.componentIds.indexOf(t);this.componentIds.splice(r,1),this._buttonComponents.delete(t),this.removed.raiseEvent(e)}}add(t,e){if(lt(t.id,String),g(t.location,Object.values(z)),g(t.action,{name:String,title:[void 0,String],icon:[void 0,String],callback:Function,active:[void 0,Boolean]}),g(e,[String,q]),t.id&&this.has(t.id))throw new Error(`A button with id ${t.id} has already been registered.`);const r=t.id||gt(),i={get id(){return r},get owner(){return e},get location(){return t.location},get action(){return K(t.action)}};return this._buttonComponents.set(r,i),this.componentIds.push(r),this.added.raiseEvent(i),i}removeOwner(t){[...this.componentIds].forEach(r=>{t===this.get(r).owner&&this.remove(r)})}clear(){[...this.componentIds].forEach(e=>{this.remove(e)})}destroy(){this.added.destroy(),this.removed.destroy(),this.componentIds.splice(0),this._buttonComponents.clear()}}function en(n,t,e){g(n,{name:String,icon:[void 0,String],title:[void 0,String]}),g(t,String),g(e,Re);const r=N(E({},n),{active:!1,callback(){e.setActiveMap(t)}}),i=e.mapActivated.addEventListener(s=>{r.active=s.name===t});return{action:r,destroy:i}}function nn(n,t,e,r){g(n,{name:String,icon:[void 0,String],title:[void 0,String]}),g(t,{id:String}),g(r,[String,q]);const i=N(E({},n),{active:e.has(t.id),callback(){if(this.active)e.remove(t.id);else return e.add(t,r);return null}}),s=[e.added.addEventListener(({id:a})=>{a===t.id&&(i.active=!0)}),e.removed.addEventListener(({id:a})=>{a===t.id&&(i.active=!1)})];return{action:i,destroy:()=>{s.forEach(a=>{a()})}}}function rn(n,t,e,r){g(n,{name:String,icon:[void 0,String],title:[void 0,String]}),g(r,[String,q]);const i=gt(),s=u=>{if(!document.getElementById(i)){const h=document.createElement("div");h.id=i,Object.assign(h.style,{position:"absolute",zIndex:u,top:0,bottom:0,left:0,right:0}),h.onclick=()=>{e.remove(i)},document.body.appendChild(h)}},o=()=>{const u=document.getElementById(i);u&&u.parentElement.removeChild(u)},a=N(E({},n),{active:!1,callback(u){if(this.active)this.active=!1,e.remove(i);else{this.active=!0;const{left:f,top:h,width:d}=u.currentTarget.getBoundingClientRect(),_=yi(f+d,h),m=N(E({},t==null?void 0:t.state),{hideHeader:!0});e.add(N(E({position:_},t),{id:i,state:m}),r),s(e.componentIds.length-2)}return null}}),l=[e.removed.addEventListener(({id:u})=>{u===i&&(a.active=!1,o())}),o];return{action:a,destroy:()=>{l.forEach(u=>{u()})}}}function sn(n,t){return g(n,{name:String,icon:[void 0,String],title:[void 0,String]}),g(t,String),N(E({},n),{callback(){const e=document.createElement("a");e.href=t,e.target="_blank",e.click()}})}function se(n,t,e,r){return g(n,{name:String,icon:[void 0,String],title:[void 0,String]}),g(t,[De,String]),g(e,je),g(r,Re),N(E({},n),{async callback(){let i=t;typeof i=="string"&&(i=e.getByKey(t)),i&&await r.activeMap.gotoViewPoint(i)}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var oe=function(n,t){return oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},oe(n,t)};function F(n,t){oe(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function St(n){return typeof n=="function"}var on=!1,D={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){var t=new Error;""+t.stack}on=n},get useDeprecatedSynchronousErrorHandling(){return on}};function ft(n){setTimeout(function(){throw n},0)}var Ft={closed:!0,next:function(n){},error:function(n){if(D.useDeprecatedSynchronousErrorHandling)throw n;ft(n)},complete:function(){}},an=function(){return Array.isArray||function(n){return n&&typeof n.length=="number"}}();function cn(n){return n!==null&&typeof n=="object"}var Ei=function(){function n(t){return Error.call(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,r){return r+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t,this}return n.prototype=Object.create(Error.prototype),n}(),Lt=Ei,J=function(){function n(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return n.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this,r=e._parentOrParents,i=e._ctorUnsubscribe,s=e._unsubscribe,o=e._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof n)r.remove(this);else if(r!==null)for(var a=0;a<r.length;++a){var l=r[a];l.remove(this)}if(St(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(f){t=f instanceof Lt?ln(f.errors):[f]}}if(an(o))for(var a=-1,c=o.length;++a<c;){var u=o[a];if(cn(u))try{u.unsubscribe()}catch(h){t=t||[],h instanceof Lt?t=t.concat(ln(h.errors)):t.push(h)}}if(t)throw new Lt(t)}},n.prototype.add=function(t){var e=t;if(!t)return n.EMPTY;switch(typeof t){case"function":e=new n(t);case"object":if(e===this||e.closed||typeof e.unsubscribe!="function")return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof n)){var r=e;e=new n,e._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=e._parentOrParents;if(i===null)e._parentOrParents=this;else if(i instanceof n){if(i===this)return e;e._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return e;var s=this._subscriptions;return s===null?this._subscriptions=[e]:s.push(e),e},n.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);r!==-1&&e.splice(r,1)}},n.EMPTY=function(t){return t.closed=!0,t}(new n),n}();function ln(n){return n.reduce(function(t,e){return t.concat(e instanceof Lt?e.errors:e)},[])}var Nt=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),j=function(n){F(t,n);function t(e,r,i){var s=n.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=Ft;break;case 1:if(!e){s.destination=Ft;break}if(typeof e=="object"){e instanceof t?(s.syncErrorThrowable=e.syncErrorThrowable,s.destination=e,e.add(s)):(s.syncErrorThrowable=!0,s.destination=new un(s,e));break}default:s.syncErrorThrowable=!0,s.destination=new un(s,e,r,i);break}return s}return t.prototype[Nt]=function(){return this},t.create=function(e,r,i){var s=new t(e,r,i);return s.syncErrorThrowable=!1,s},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(J),un=function(n){F(t,n);function t(e,r,i,s){var o=n.call(this)||this;o._parentSubscriber=e;var a,l=o;return St(r)?a=r:r&&(a=r.next,i=r.error,s=r.complete,r!==Ft&&(l=Object.create(r),St(l.unsubscribe)&&o.add(l.unsubscribe.bind(l)),l.unsubscribe=o.unsubscribe.bind(o))),o._context=l,o._next=a,o._error=i,o._complete=s,o}return t.prototype.next=function(e){if(!this.isStopped&&this._next){var r=this._parentSubscriber;!D.useDeprecatedSynchronousErrorHandling||!r.syncErrorThrowable?this.__tryOrUnsub(this._next,e):this.__tryOrSetError(r,this._next,e)&&this.unsubscribe()}},t.prototype.error=function(e){if(!this.isStopped){var r=this._parentSubscriber,i=D.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!r.syncErrorThrowable?(this.__tryOrUnsub(this._error,e),this.unsubscribe()):(this.__tryOrSetError(r,this._error,e),this.unsubscribe());else if(r.syncErrorThrowable)i?(r.syncErrorValue=e,r.syncErrorThrown=!0):ft(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;ft(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var i=function(){return e._complete.call(e._context)};!D.useDeprecatedSynchronousErrorHandling||!r.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(r,i),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,r){try{e.call(this._context,r)}catch(i){if(this.unsubscribe(),D.useDeprecatedSynchronousErrorHandling)throw i;ft(i)}},t.prototype.__tryOrSetError=function(e,r,i){if(!D.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,i)}catch(s){return D.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=s,e.syncErrorThrown=!0,!0):(ft(s),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(j);function Ti(n){for(;n;){var t=n,e=t.closed,r=t.destination,i=t.isStopped;if(e||i)return!1;r&&r instanceof j?n=r:n=null}return!0}function $i(n,t,e){if(n){if(n instanceof j)return n;if(n[Nt])return n[Nt]()}return!n&&!t&&!e?new j(Ft):new j(n,t,e)}var Et=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function fn(n){return n}function xi(n){return n.length===0?fn:n.length===1?n[0]:function(e){return n.reduce(function(r,i){return i(r)},e)}}var L=function(){function n(t){this._isScalar=!1,t&&(this._subscribe=t)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(t,e,r){var i=this.operator,s=$i(t,e,r);if(i?s.add(i.call(s,this.source)):s.add(this.source||D.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),D.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){D.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Ti(t)?t.error(e):console.warn(e)}},n.prototype.forEach=function(t,e){var r=this;return e=hn(e),new e(function(i,s){var o;o=r.subscribe(function(a){try{t(a)}catch(l){s(l),o&&o.unsubscribe()}},s,i)})},n.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},n.prototype[Et]=function(){return this},n.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?this:xi(t)(this)},n.prototype.toPromise=function(t){var e=this;return t=hn(t),new t(function(r,i){var s;e.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},n.create=function(t){return new n(t)},n}();function hn(n){if(n||(n=D.Promise||Promise),!n)throw new Error("no Promise impl found");return n}var Ii=function(){function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n}(),Tt=Ii,Ci=function(n){F(t,n);function t(e,r){var i=n.call(this)||this;return i.subject=e,i.subscriber=r,i.closed=!1,i}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,r=e.observers;if(this.subject=null,!(!r||r.length===0||e.isStopped||e.closed)){var i=r.indexOf(this.subscriber);i!==-1&&r.splice(i,1)}}},t}(J),Ai=function(n){F(t,n);function t(e){var r=n.call(this,e)||this;return r.destination=e,r}return t}(j),pn=function(n){F(t,n);function t(){var e=n.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype[Nt]=function(){return new Ai(this)},t.prototype.lift=function(e){var r=new dn(this,this);return r.operator=e,r},t.prototype.next=function(e){if(this.closed)throw new Tt;if(!this.isStopped)for(var r=this.observers,i=r.length,s=r.slice(),o=0;o<i;o++)s[o].next(e)},t.prototype.error=function(e){if(this.closed)throw new Tt;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var r=this.observers,i=r.length,s=r.slice(),o=0;o<i;o++)s[o].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Tt;this.isStopped=!0;for(var e=this.observers,r=e.length,i=e.slice(),s=0;s<r;s++)i[s].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(e){if(this.closed)throw new Tt;return n.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){if(this.closed)throw new Tt;return this.hasError?(e.error(this.thrownError),J.EMPTY):this.isStopped?(e.complete(),J.EMPTY):(this.observers.push(e),new Ci(this,e))},t.prototype.asObservable=function(){var e=new L;return e.source=this,e},t.create=function(e,r){return new dn(e,r)},t}(L),dn=function(n){F(t,n);function t(e,r){var i=n.call(this)||this;return i.destination=e,i.source=r,i}return t.prototype.next=function(e){var r=this.destination;r&&r.next&&r.next(e)},t.prototype.error=function(e){var r=this.destination;r&&r.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var r=this.source;return r?this.source.subscribe(e):J.EMPTY},t}(pn),Mi=new L(function(n){return n.complete()});function Oi(n){return n?Fi(n):Mi}function Fi(n){return new L(function(t){return n.schedule(function(){return t.complete()})})}function _n(n){return n&&typeof n.schedule=="function"}var vn=function(n){return function(t){for(var e=0,r=n.length;e<r&&!t.closed;e++)t.next(n[e]);t.complete()}};function ae(n,t){return new L(function(e){var r=new J,i=0;return r.add(t.schedule(function(){if(i===n.length){e.complete();return}e.next(n[i++]),e.closed||r.add(this.schedule())})),r})}function mn(n,t){return t?ae(n,t):new L(vn(n))}function Li(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=n[n.length-1];return _n(e)?(n.pop(),ae(n,e)):mn(n)}function X(){}var Ni=function(){function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n}(),ki=Ni;function kt(n,t){return function(r){if(typeof n!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new Vi(n,t))}}var Vi=function(){function n(t,e){this.project=t,this.thisArg=e}return n.prototype.call=function(t,e){return e.subscribe(new Pi(t,this.project,this.thisArg))},n}(),Pi=function(n){F(t,n);function t(e,r,i){var s=n.call(this,e)||this;return s.project=r,s.count=0,s.thisArg=i||s,s}return t.prototype._next=function(e){var r;try{r=this.project.call(this.thisArg,e,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(r)},t}(j),Ri=function(n){return function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,ft),t}};function Di(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Vt=Di(),ji=function(n){return function(t){var e=n[Vt]();do{var r=void 0;try{r=e.next()}catch(i){return t.error(i),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}while(!0);return typeof e.return=="function"&&t.add(function(){e.return&&e.return()}),t}},Wi=function(n){return function(t){var e=n[Et]();if(typeof e.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}},gn=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function bn(n){return!!n&&typeof n.subscribe!="function"&&typeof n.then=="function"}var yn=function(n){if(!!n&&typeof n[Et]=="function")return Wi(n);if(gn(n))return vn(n);if(bn(n))return Ri(n);if(!!n&&typeof n[Vt]=="function")return ji(n);var t=cn(n)?"an invalid object":"'"+n+"'",e="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(e)};function Bi(n,t){return new L(function(e){var r=new J;return r.add(t.schedule(function(){var i=n[Et]();r.add(i.subscribe({next:function(s){r.add(t.schedule(function(){return e.next(s)}))},error:function(s){r.add(t.schedule(function(){return e.error(s)}))},complete:function(){r.add(t.schedule(function(){return e.complete()}))}}))})),r})}function Ui(n,t){return new L(function(e){var r=new J;return r.add(t.schedule(function(){return n.then(function(i){r.add(t.schedule(function(){e.next(i),r.add(t.schedule(function(){return e.complete()}))}))},function(i){r.add(t.schedule(function(){return e.error(i)}))})})),r})}function Hi(n,t){if(!n)throw new Error("Iterable cannot be null");return new L(function(e){var r=new J,i;return r.add(function(){i&&typeof i.return=="function"&&i.return()}),r.add(t.schedule(function(){i=n[Vt](),r.add(t.schedule(function(){if(!e.closed){var s,o;try{var a=i.next();s=a.value,o=a.done}catch(l){e.error(l);return}o?e.complete():(e.next(s),this.schedule())}}))})),r})}function Gi(n){return n&&typeof n[Et]=="function"}function qi(n){return n&&typeof n[Vt]=="function"}function zi(n,t){if(n!=null){if(Gi(n))return Bi(n,t);if(bn(n))return Ui(n,t);if(gn(n))return ae(n,t);if(qi(n)||typeof n=="string")return Hi(n,t)}throw new TypeError((n!==null&&typeof n||n)+" is not observable")}function wn(n,t){return t?zi(n,t):n instanceof L?n:new L(yn(n))}var ce=function(n){F(t,n);function t(e){var r=n.call(this)||this;return r.parent=e,r}return t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(j),le=function(n){F(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(j);function ue(n,t){if(!t.closed){if(n instanceof L)return n.subscribe(t);var e;try{e=yn(n)(t)}catch(r){t.error(r)}return e}}function Sn(n,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?function(r){return r.pipe(Sn(function(i,s){return wn(n(i,s)).pipe(kt(function(o,a){return t(i,o,s,a)}))},e))}:(typeof t=="number"&&(e=t),function(r){return r.lift(new Ji(n,e))})}var Ji=function(){function n(t,e){e===void 0&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return n.prototype.call=function(t,e){return e.subscribe(new Yi(t,this.project,this.concurrent))},n}(),Yi=function(n){F(t,n);function t(e,r,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var s=n.call(this,e)||this;return s.project=r,s.concurrent=i,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var r,i=this.index++;try{r=this.project(e,i)}catch(s){this.destination.error(s);return}this.active++,this._innerSub(r)},t.prototype._innerSub=function(e){var r=new ce(this),i=this.destination;i.add(r);var s=ue(e,r);s!==r&&i.add(s)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},t}(le);function Zi(n){return n===void 0&&(n=Number.POSITIVE_INFINITY),Sn(fn,n)}function st(n,t,e,r){return St(e)&&(r=e,e=void 0),r?st(n,t,e).pipe(kt(function(i){return an(i)?r.apply(void 0,i):r(i)})):new L(function(i){function s(o){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(o)}En(n,t,s,i,e)})}function En(n,t,e,r,i){var s;if(Xi(n)){var o=n;n.addEventListener(t,e,i),s=function(){return o.removeEventListener(t,e,i)}}else if(Qi(n)){var a=n;n.on(t,e),s=function(){return a.off(t,e)}}else if(Ki(n)){var l=n;n.addListener(t,e),s=function(){return l.removeListener(t,e)}}else if(n&&n.length)for(var c=0,u=n.length;c<u;c++)En(n[c],t,e,r,i);else throw new TypeError("Invalid event target");r.add(s)}function Ki(n){return n&&typeof n.addListener=="function"&&typeof n.removeListener=="function"}function Qi(n){return n&&typeof n.on=="function"&&typeof n.off=="function"}function Xi(n){return n&&typeof n.addEventListener=="function"&&typeof n.removeEventListener=="function"}function ts(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Number.POSITIVE_INFINITY,r=null,i=n[n.length-1];return _n(i)?(r=n.pop(),n.length>1&&typeof n[n.length-1]=="number"&&(e=n.pop())):typeof i=="number"&&(e=n.pop()),r===null&&n.length===1&&n[0]instanceof L?n[0]:Zi(e)(mn(n,r))}function es(n){return function(t){return n===0?Oi():t.lift(new ns(n))}}var ns=function(){function n(t){if(this.total=t,this.total<0)throw new ki}return n.prototype.call=function(t,e){return e.subscribe(new rs(t,this.total))},n}(),rs=function(n){F(t,n);function t(e,r){var i=n.call(this,e)||this;return i.total=r,i.count=0,i}return t.prototype._next=function(e){var r=this.total,i=++this.count;i<=r&&(this.destination.next(e),i===r&&(this.destination.complete(),this.unsubscribe()))},t}(j);function Tn(n,t){return typeof t=="function"?function(e){return e.pipe(Tn(function(r,i){return wn(n(r,i)).pipe(kt(function(s,o){return t(r,s,i,o)}))}))}:function(e){return e.lift(new is(n))}}var is=function(){function n(t){this.project=t}return n.prototype.call=function(t,e){return e.subscribe(new ss(t,this.project))},n}(),ss=function(n){F(t,n);function t(e,r){var i=n.call(this,e)||this;return i.project=r,i.index=0,i}return t.prototype._next=function(e){var r,i=this.index++;try{r=this.project(e,i)}catch(s){this.destination.error(s);return}this._innerSub(r)},t.prototype._innerSub=function(e){var r=this.innerSubscription;r&&r.unsubscribe();var i=new ce(this),s=this.destination;s.add(i),this.innerSubscription=ue(e,i),this.innerSubscription!==i&&s.add(this.innerSubscription)},t.prototype._complete=function(){var e=this.innerSubscription;(!e||e.closed)&&n.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&n.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(le);function fe(n){return function(t){return t.lift(new os(n))}}var os=function(){function n(t){this.notifier=t}return n.prototype.call=function(t,e){var r=new as(t),i=ue(this.notifier,new ce(r));return i&&!r.seenValue?(r.add(i),e.subscribe(r)):r},n}(),as=function(n){F(t,n);function t(e){var r=n.call(this,e)||this;return r.seenValue=!1,r}return t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(le);function $t(n,t,e){return function(i){return i.lift(new cs(n,t,e))}}var cs=function(){function n(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}return n.prototype.call=function(t,e){return e.subscribe(new ls(t,this.nextOrObserver,this.error,this.complete))},n}(),ls=function(n){F(t,n);function t(e,r,i,s){var o=n.call(this,e)||this;return o._tapNext=X,o._tapError=X,o._tapComplete=X,o._tapError=i||X,o._tapComplete=s||X,St(r)?(o._context=o,o._tapNext=r):r&&(o._context=r,o._tapNext=r.next||X,o._tapError=r.error||X,o._tapComplete=r.complete||X),o}return t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(r){this.destination.error(r);return}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(r){this.destination.error(r);return}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){this.destination.error(e);return}return this.destination.complete()},t}(j),us=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{ref:"windowComponentRef",staticClass:"vsc-window v-sheet elevation-0 position-absolute",attrs:{id:"window-component--"+n.windowState.id},on:{click:n.clicked}},[n.windowState.hideHeader?n._e():e(ct,{ref:"draggableHeaderRef",staticClass:"v-sheet elevation-3 pa-2 transition-color-100-ease",class:{"cursor-grab":n.isDynamic,"grey--text":!n.isOnTop,"rounded-tl":!n.isDocked,"rounded-tr":!n.isDocked},attrs:{draggable:n.isDynamic}},[n._t("headerComponent")],2),e(ct,{staticClass:"v-sheet elevation-3 overflow-y-auto overflow-x-hidden w-full h-full",class:{"rounded-br":!n.isDocked,"rounded-bl":!n.isDocked}},[n._t("default")],2)],1)},fs=[];function T(n,t,e,r,i,s,o,a){var l=typeof n=="function"?n.options:n;t&&(l.render=t,l.staticRenderFns=e,l._compiled=!0),r&&(l.functional=!0),s&&(l._scopeId="data-v-"+s);var c;if(o?(c=function(h){h=h||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!h&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(h=__VUE_SSR_CONTEXT__),i&&i.call(this,h),h&&h._registeredComponents&&h._registeredComponents.add(o)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(d,_){return c.call(_),u(d,_)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,c):[c]}return{exports:n,options:l}}const hs={props:{windowState:{type:Object,required:!0},isOnTop:{type:Boolean,required:!0,default:!1},slotWindow:{type:Object,required:!0}},setup({windowState:n,slotWindow:t},{emit:e}){const r=w(null),i=w(null),s=O(()=>t!==C.STATIC),o=O(()=>t!==C.DETACHED),a=u=>{e("click",u)};let l,c;return qt(()=>{!n.hideHeader&&t.value!==C.STATIC&&$r(()=>{const u=st(r.value.$el,"dragstart"),f=st(document.body,"dragover"),h=st(document.body,"drop");c=u.pipe($t(()=>{l=f.subscribe(_=>{_.preventDefault()})}),Tn(_=>{const m=window.getComputedStyle(i.value,null),y={top:parseInt(m.getPropertyValue("top"),10),left:parseInt(m.getPropertyValue("left"),10),width:parseInt(m.getPropertyValue("width"),10),height:parseInt(m.getPropertyValue("height"),10)};return _.dataTransfer.setData("text/html",null),h.pipe(es(1),kt(W=>(y.dx=_.clientX-W.clientX,y.dy=_.clientY-W.clientY,y)),$t(()=>{l.unsubscribe()}))})).subscribe(_=>{e("dropped",_)})})}),It(()=>{l&&l.unsubscribe(),c&&c.unsubscribe()}),{isDynamic:s,isDocked:o,draggableHeaderRef:r,windowComponentRef:i,clicked:a}}},$n={};var ps=T(hs,us,fs,!1,ds,null,null,null);function ds(n){for(let t in $n)this[t]=$n[t]}var xn=function(){return ps.exports}(),_s=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("span",{staticClass:"d-flex justify-space-between"},[e("span",[n.windowState.headerIcon?e(Q,{staticClass:"mr-2 primary--text",domProps:{textContent:n._s(n.windowState.headerIcon)}}):n._e(),e("h3",{staticClass:"font-size-14 d-inline-block user-select-none"},[n._v(" "+n._s(n._f("translate")(n.windowState.headerTitle))+" ")])],1),e(Q,{staticClass:".float-right",attrs:{size:"16"},domProps:{textContent:n._s("mdi-close-thick")},on:{click:function(r){return r.stopPropagation(),n.close.apply(null,arguments)}}})],1)},vs=[];const ms={props:{windowState:{type:Object,required:!0}},setup(n,{emit:t}){return{close:()=>{t("close")},clicked:i=>{t("click",i)}}}},In={};var gs=T(ms,_s,vs,!1,bs,null,null,null);function bs(n){for(let t in In)this[t]=In[t]}var ys=function(){return gs.exports}(),ws=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",n._l(n.componentIds,function(r,i){return e(xn,{key:r,class:n.getState(r).classes,style:n.getStyles(r,i),attrs:{"window-state":n.getState(r),"slot-window":n.getSlot(r),"z-index":i,"is-on-top":n.isOnTop(i)},on:{dropped:function(s){return n.dropped(r,s)},click:function(s){return n.clicked(r)}},scopedSlots:n._u([n.getState(r).hideHeader?null:{key:"headerComponent",fn:function(){return[e(n.getHeaderComponent(r),{tag:"component",attrs:{"window-state":n.getState(r)},on:{close:function(s){return n.close(r)}}})]},proxy:!0}],null,!0)},[e(n.getComponent(r),n._b({tag:"component",attrs:{"window-state":n.getState(r)}},"component",n.getProps(r),!1))],1)}),1)},Ss=[];const Es={name:"VcsWindowManager",components:{WindowComponent:xn},setup(){const n=nt("vcsApp"),{windowManager:t}=n,{componentIds:e}=t;return{componentIds:e,getComponent:c=>t.get(c).component,getHeaderComponent:c=>t.get(c).headerComponent||ys,getStyles:(c,u)=>{const f=t.get(c),h=f==null?void 0:f.state,d=f==null?void 0:f.position;return E({zIndex:u,left:d.left,top:d.top,right:d.right,bottom:d.bottom,width:d.width,height:d.height},h.styles||{})},getState:c=>{var u;return(u=t.get(c))==null?void 0:u.state},getProps:c=>{var u,f;return(f=(u=t.get(c))==null?void 0:u.props)!=null?f:{}},isOnTop:c=>c===e.length-1,getSlot:c=>t.get(c).slot,close:c=>{t.remove(c)},dropped:(c,u)=>{const{innerWidth:f,innerHeight:h}=window,d=Math.min(Math.max(0,u.top-u.dy),h-u.height),_=Math.min(Math.max(0,u.left-u.dx),f-u.width);t.setWindowPositionOptions(c,{top:d,left:_,width:u.width,height:u.height})},clicked:c=>{t.has(c)&&t.bringWindowToTop(c)}}}},Cn={};var Ts=T(Es,ws,Ss,!1,$s,null,null,null);function $s(n){for(let t in Cn)this[t]=Cn[t]}var xs=function(){return Ts.exports}(),Is=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("span",{staticClass:"ma-1 position-relative",class:[].concat(n.customClasses)},[e(Jt,{staticClass:"expand-button mb-0 w-16 h-10",class:{"mb-0":n.active,"h-full":n.active,"rounded-b-0":n.active,"border-2--primary":n.group.options[0].selected},attrs:{color:n.active?"white":null,text:n.active?null:!0,disabled:n.group.options[0].disabled,elevation:"0"},on:{click:function(){return n.setOpen(n.group.id,!n.group.open)}}},[n._t("selected-icon",function(){return[e(Q,{domProps:{textContent:n._s(n.group.options[0].icon)}})]}),n._t("default"),n.group.options.length>1?e(Q,{class:{"rotate-180--right":n.active},domProps:{textContent:n._s("mdi-chevron-down")}}):n._e()],2),n.group.open?e("div",{staticClass:"d-flex flex-row white rounded-b position-absolute z-index-1 pos-t-11"},[n._t("menu-items",function(){return n._l(n.group.options.slice(1),function(r){return e(Jt,{key:r.id,staticClass:"py-1 rounded-t-0 rounded-br-0 h-10.5 -mt-2",attrs:{elevation:"0"},on:{click:function(){return n.selectOption(r.id)}}},[e(Q,{staticClass:"mt-1.5",domProps:{textContent:n._s(r.icon)}})],1)})})],2):n._e()],1)},Cs=[],cc="";const As={name:"VcsToolboxSingleSelectButton",props:{value:{type:Boolean,default:!1},group:{type:Object,default:()=>({})},customClasses:{type:Array,default:()=>[]}},setup({value:n},{emit:t}){const e=w(!1);return{active:n,open:e,selectOption:s=>{t("selected",s),t("set-open",{id:s,open:!e})},setOpen:(s,o)=>{t("set-open",{id:s,open:o})}}}},An={};var Ms=T(As,Is,Cs,!1,Os,"738eee0c",null,null);function Os(n){for(let t in An)this[t]=An[t]}var Mn=function(){return Ms.exports}(),Fs=function(){var n=this,t=n.$createElement,e=n._self._c||t;return n.group.options&&n.group.options[0]?e("span",{staticClass:"ma-1 position-relative",class:[].concat(n.customClasses)},[e(Jt,{staticClass:"expand-button mb-0 w-16 h-10",class:{"mb-0":n.active,"h-full":n.active,"rounded-b-0":n.active},attrs:{color:n.active?"white":null,text:n.active?null:!0,disabled:n.group.options[0].disabled,elevation:"0"},on:{click:function(){return n.setOpen(n.group.id,!n.group.open)}}},[n._t("selected-icon",function(){return[e(Q,{domProps:{textContent:n._s(n.group.icon)}})]}),n._t("default"),n.group.options.length>1?e(Q,{class:{"rotate-180--right":n.active},domProps:{textContent:n._s("mdi-chevron-down")}}):n._e()],2),n.group.open?e(Yt,{staticStyle:{position:"absolute","min-width":"150px"},attrs:{tile:""}},[e(Ge,{attrs:{dense:""}},[e(Rr,n._l(n.group.options,function(r){return e(qe,{key:r.id,attrs:{dense:""},on:{click:function(){return n.selectOption(r.id)}}},[e(Dr,[e("input",{class:r.selected?"y":"n",attrs:{type:"checkbox"},domProps:{checked:r.selected}})]),e(ze,[e(jr,[n._v(n._s(r.text))])],1)],1)}),1)],1)],1):n._e()],1):n._e()},Ls=[],lc="";const Ns={name:"VcsToolboxSingleSelectButton",props:{value:{type:Boolean,default:void 0},group:{type:Object,default:()=>({})},customClasses:{type:Array,default:()=>[]}},setup({value:n},{emit:t}){const e=w(!1);return{active:n,open:e,selectOption:s=>{t("selected",s)},setOpen:(s,o)=>{t("set-open",{id:s,open:o})}}}},On={};var ks=T(Ns,Fs,Ls,!1,Vs,"2139e4f6",null,null);function Vs(n){for(let t in On)this[t]=On[t]}var Fn=function(){return ks.exports}(),Ps=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e(Wr,{staticClass:"vcs-toolbox toolbar__secondary rounded-b mx-auto v-sheet",style:{maxWidth:n.getWidth()+"px"},attrs:{dense:""}},[e(Zt,{staticClass:"w-full"},[e("div",{staticClass:"d-flex align-center justify-space-between w-full"},n._l(n.groups,function(r){return e("span",{key:r.id},[r.type==="customComponent"?e(r.component,{tag:"component",attrs:{icon:"$vcsObjectAttribute",value:r.active,group:r},nativeOn:{click:function(i){r.active=!r.active}}}):n._e(),r.type==="toggleButton"?e("Button",{attrs:{group:r,icon:"$vcsObjectAttribute",value:r.active},nativeOn:{click:function(i){r.active=!r.active}}}):n._e(),n.toolboxGroupVisible(r)&&r.type==="singleSelectButton"?e(Mn,{attrs:{group:r},on:{selected:function(i){return n.selectSingleSelectOption(i)},"set-open":function(i){var s=i.id,o=i.open;return n.setGroupOpen({id:s,open:o})}}}):n._e(),n.toolboxGroupVisible(r)&&r.type==="multiSelectButton"?e(Fn,{attrs:{group:r},on:{selected:function(i){return n.selectMultiSlectOption(i)},"set-open":function(i){var s=i.id,o=i.open;return n.setGroupOpen({id:s,open:o})}}}):n._e()],1)}),0)])],1)},Rs=[],uc="";const Ds={name:"VcsToolbox",props:{width:{type:Number,default:600}},setup(){const n=nt("vcsApp"),{toolboxManager:t}=n,{state:{groups:e}}=t;return{groups:e,getWidth:()=>t.getNumberOfUsedSlots()*75,selectSingleSelectOption:l=>{t.bringToTop(l)},selectMultiSlectOption:l=>{t.selectOption(l)},setGroupOpen:({id:l,open:c})=>{t.setGroupOpen(l,c)},toolboxGroupVisible:l=>l&&l.options&&l.options.length}},components:{ToolboxSingleSelectButton:Mn,ToolboxMultiSelectButton:Fn,VcsButton:Yr}},Ln={};var js=T(Ds,Ps,Rs,!1,Ws,"e06d93b2",null,null);function Ws(n){for(let t in Ln)this[t]=Ln[t]}var Bs=function(){return js.exports}(),Us=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{attrs:{id:n.mapId}})},Hs=[],fc="";function Gs(){return ie("VcsMap")}const qs={props:{mapId:{type:String,required:!0}},setup(n){const t=nt("vcsApp");qt(async()=>{t.maps.setTarget(n.mapId),xr(t.maps.activeMap)&&Gs().error("Map is reactive, PLEASE FIX")})}},Nn={};var zs=T(qs,Us,Hs,!1,Js,"e146d926",null,null);function Js(n){for(let t in Nn)this[t]=Nn[t]}var kn=function(){return zs.exports}(),Ys=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e(Br,{attrs:{app:"",absolute:"",dense:""}},[e(Je,{staticClass:"pa-0",attrs:{fluid:""}},[e(mt,{attrs:{"no-gutters":""}},[e(Kt,[e(Zt,[e("div",{staticClass:"d-flex align-center"},[e("VcsActionButtonList",{attrs:{actions:n.mapActions,"overflow-count":3,large:""}}),n.mapActions.length>0&&(n.contentActions.length>0||n.toolActions.length>0)?e(Qt,{attrs:{vertical:"",inset:""}}):n._e(),e("VcsActionButtonList",{attrs:{actions:n.contentActions,large:""}}),n.contentActions.length>0&&n.toolActions.length>0?e(Qt,{attrs:{vertical:"",inset:""}}):n._e(),e("VcsActionButtonList",{attrs:{actions:n.toolActions,large:""}})],1)])],1),e(Kt,{staticClass:"align-center d-flex justify-center"},[e("div",{staticClass:"company-logo"})]),e(Kt,{staticClass:"align-content-end d-flex justify-end"},[e(Zt,[e("div",{staticClass:"d-flex align-center"},[e("VcsActionButtonList",{attrs:{actions:n.projectActions,large:""}}),n.projectActions.length>0&&n.menuActions.length>0?e(Qt,{attrs:{vertical:"",inset:""}}):n._e(),e("VcsActionButtonList",{attrs:{actions:n.menuActions,"overflow-count":3,large:""}})],1)])],1)],1)],1)],1)},Zs=[];const Ks={name:"VcsNavbar",components:{VcsActionButtonList:Zr},setup(){const n=nt("vcsApp"),t=w(n.navbarManager.componentIds),e=O(()=>t.value.map(i=>n.navbarManager.get(i))),r=i=>O(()=>Si(e.value,i,[...n.plugins].map(s=>s.name)));return{mapActions:r(z.MAP),contentActions:r(z.CONTENT),toolActions:r(z.TOOL),projectActions:r(z.PROJECT),menuActions:r(z.MENU)}}},Vn={};var Qs=T(Ks,Ys,Zs,!1,Xs,null,null,null);function Xs(n){for(let t in Vn)this[t]=Vn[t]}var Pn=function(){return Qs.exports}(),to=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"58",height:"58",viewBox:"0 0 58 58"}},[e("g",{attrs:{id:"Group_1654","data-name":"Group 1654",transform:"translate(24)"}},[e("path",{class:n.canEmit?"cursor-pointer":"",attrs:{id:"north_arrow","data-name":"Polygon 14",d:"M4,0,8,13H0Z",transform:"translate(1)",fill:"currentColor"},on:{click:function(r){return n.emit(0)}}}),e("path",{class:n.canEmit?"cursor-pointer":"",attrs:{id:"south_arrow","data-name":"Polygon 17",d:"M4,0,8,13H0Z",transform:"translate(9 58) rotate(180)",fill:"rgba(88,88,88,0.51)"},on:{click:function(r){return n.emit(180)}}})]),e("g",{attrs:{id:"Group_1653","data-name":"Group 1653",transform:"translate(0 33) rotate(-90)"}},[e("path",{class:n.canEmit?"cursor-pointer":"",attrs:{id:"west_arrow","data-name":"Polygon 14",d:"M4,0,8,13H0Z",fill:"rgba(88,88,88,0.51)"},on:{click:function(r){return n.emit(270)}}}),e("path",{class:n.canEmit?"cursor-pointer":"",attrs:{id:"east_arrow","data-name":"Polygon 17",d:"M4,0,8,13H0Z",transform:"translate(8 58) rotate(180)",fill:"rgba(88,88,88,0.51)"},on:{click:function(r){return n.emit(90)}}})]),n.hideTicks?n._e():e("g",{attrs:{id:"Group_1672","data-name":"Group 1672",transform:"translate(1)"}},[e("line",{attrs:{id:"Line_289-2","data-name":"Line 289",x2:"6.079",transform:"translate(3.751 15) rotate(30)",fill:"none",stroke:"#707070","stroke-linecap":"round","stroke-width":"1"}}),e("line",{attrs:{id:"Line_290-2","data-name":"Line 290",x2:"4.665",transform:"translate(48.208 40.667) rotate(30)",fill:"none",stroke:"#707070","stroke-linecap":"round","stroke-width":"1"}}),e("line",{attrs:{id:"Line_289-4","data-name":"Line 289",x2:"6.079",transform:"translate(14 53.249) rotate(-60)",fill:"none",stroke:"#707070","stroke-linecap":"round","stroke-width":"1"}}),e("line",{attrs:{id:"Line_290-3","data-name":"Line 290",x2:"4.665",transform:"translate(39.668 8.792) rotate(-60)",fill:"none",stroke:"#707070","stroke-linecap":"round","stroke-width":"1"}}),e("line",{attrs:{id:"Line_289-5","data-name":"Line 289",x2:"6.079",transform:"translate(14 4.751) rotate(60)",fill:"none",stroke:"#707070","stroke-linecap":"round","stroke-width":"1"}}),e("line",{attrs:{id:"Line_290-4","data-name":"Line 290",x2:"4.665",transform:"translate(39.667 49.208) rotate(60)",fill:"none",stroke:"#707070","stroke-linecap":"round","stroke-width":"1"}}),e("line",{attrs:{id:"Line_289-6","data-name":"Line 289",x2:"6.079",transform:"translate(3.752 43) rotate(-30)",fill:"none",stroke:"#707070","stroke-linecap":"round","stroke-width":"1"}}),e("line",{attrs:{id:"Line_290-5","data-name":"Line 290",x2:"4.665",transform:"translate(48.209 17.333) rotate(-30)",fill:"none",stroke:"#707070","stroke-linecap":"round","stroke-width":"1"}})])])},eo=[],hc="";const no={props:{canEmit:{type:Boolean,default:!0},hideTicks:{type:Boolean,default:!1}},methods:{emit(n){this.canEmit&&this.$emit("direction-click",n)}}},Rn={};var ro=T(no,to,eo,!1,io,"524999e4",null,null);function io(n){for(let t in Rn)this[t]=Rn[t]}var Dn=function(){return ro.exports}(),so=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e(ct,{ref:"compassRef",staticClass:`
      h-16 w-16
      d-flex flex-column justify-center align-center
      position-relative
      rounded-circle
      user-select-none
      transition-transform-200-ease
    `,style:{transform:"rotate("+n.compassRotation+"deg)",cursor:n.cursor},attrs:{elevation:"1"},on:{mousedown:n.trackMouse}},[e("span",[n._v("N")]),e(Dn,{staticClass:"position-absolute pos-a-0 primary--text",attrs:{"can-emit":n.viewMode==="3d"||n.viewMode==="oblique","hide-ticks":n.viewMode==="oblique"},on:{"direction-click":function(r){return n.$emit("input",r)}}})],1)},oo=[];const ao={name:"VcsCompass",components:{MapNavCompass:Dn},props:{viewMode:{type:String,required:!0},value:{type:Number,default:0}},setup(n,t){const e=new pn,r=w(),i=w(),s=({referenceEl:c,event:u})=>{const{left:f,width:h,top:d,height:_}=c.getBoundingClientRect(),m=[f+h/2,d+_/2],y=Math.atan2(u.pageX-m[0],-(u.pageY-m[1]))*(180/Math.PI);return y<0?360+y:y},o=c=>{if(n.viewMode==="3d"){document.body.style.cursor="grabbing";const u=setTimeout(()=>{r.value=!0},200),f=()=>{clearTimeout(u),document.body.style.cursor="unset",r.value=!1};ts(Li(c),st(document.body,"mousemove")).pipe($t(h=>{if(r.value){const d=s({event:h,referenceEl:i.value.$el});t.emit("input",-1*d)}}),fe(st(document.body,"mouseup").pipe($t(()=>f()))),fe(st(document.body,"mouseleave").pipe($t(()=>f()))),fe(e)).subscribe()}},a=O(()=>n.viewMode==="3d"?r.value?"grabbing":"grab":"auto"),l=w(n.value);return It(()=>{e.next(),e.unsubscribe()}),{trackMouse:o,compassRef:i,cursor:a,rotationValue:l,compassRotation:O(()=>-1*l.value)}},watch:{value(n,t){let e=n-t;e>180?e-=360:e<-180&&(e+=360),this.rotationValue+=e}}},jn={};var co=T(ao,so,oo,!1,lo,null,null,null);function lo(n){for(let t in jn)this[t]=jn[t]}var Wn=function(){return co.exports}(),uo=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("VcsTooltip",{attrs:{"tooltip-position":n.tooltipPosition,tooltip:n.tooltip},scopedSlots:n._u([{key:"activator",fn:function(r){var i=r.on,s=r.attrs;return[e(Yt,n._g(n._b({staticClass:"h-8 w-8 d-flex align-center justify-center text-center btn-orientation-tools",attrs:{elevation:"2"}},"v-card",Object.assign({},n.$attrs,s),!1),Object.assign({},n.$listeners,i)),[e(Q,{attrs:{size:"16"},domProps:{textContent:n._s(n.icon)}})],1)]}}])})},fo=[],pc="";const ho={name:"OrientationToolsButton",components:{VcsTooltip:Ye},props:{icon:{type:String,required:!0},tooltip:{type:String,required:!0},tooltipPosition:{type:String,default:"left"}}},Bn={};var po=T(ho,uo,fo,!1,_o,"2e4b3b1a",null,null);function _o(n){for(let t in Bn)this[t]=Bn[t]}var ht=function(){return po.exports}(),vo=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e(ht,{attrs:{icon:"$vcsPlus",tooltip:"Zoom in"},on:{click:function(r){return n.$emit("zoom-in")}}}),e(ht,{attrs:{icon:"$vcsMinus",tooltip:"Zoom out"},on:{click:function(r){return n.$emit("zoom-out")}}})],1)},mo=[];const go={components:{OrientationToolsButton:ht}},Un={};var bo=T(go,vo,mo,!1,yo,null,null,null);function yo(n){for(let t in Un)this[t]=Un[t]}var Hn=function(){return bo.exports}(),wo=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("VcsTooltip",{attrs:{tooltip:"Camera pitch: "+Math.round(n.value)+"\xB0","tooltip-position":"left"},scopedSlots:n._u([{key:"activator",fn:function(r){var i=r.on,s=r.attrs;return[e(Yt,n._g(n._b({staticClass:"w-8"},"v-card",s,!1),i),[e(Ur,{staticClass:"vcs-slider",attrs:{color:"secondary","track-color":"accent",max:0,min:-90,vertical:"","hide-details":""},model:{value:n.tilt,callback:function(o){n.tilt=o},expression:"tilt"}})],1)]}}])})},So=[],dc="",_c="";const Eo={name:"TiltSlider",components:{VcsTooltip:Ye},props:{value:{type:Number,required:!0}},data(){return{localValue:Math.round(this.value)}},watch:{value(){this.localValue=ti(Math.round(this.value),-90,0)}},computed:{tilt:{get(){return this.localValue},set(n){n!==this.localValue&&(this.localValue=n,this.$emit("input",n))}}}},Gn={};var To=T(Eo,wo,So,!1,$o,"9ccf0838",null,null);function $o(n){for(let t in Gn)this[t]=Gn[t]}var qn=function(){return To.exports}(),xo=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"d-inline-flex"},[e(ht,{attrs:{icon:"mdi-undo",tooltip:"Rotate view left"},on:{click:function(r){return n.input(-90)}}}),e(ht,{attrs:{icon:"mdi-redo",tooltip:"Rotate view right"},on:{click:function(r){return n.input(90)}}})],1)},Io=[],vc="";const Co={name:"ObliqueRotation",components:{OrientationToolsButton:ht},props:{value:{type:Number,required:!0}},methods:{input(n){let t=this.value+n;t>360?t-=360:t<0&&(t+=360),this.$emit("input",t)}}},zn={};var Ao=T(Co,xo,Io,!1,Mo,"6da5c2b5",null,null);function Mo(n){for(let t in zn)this[t]=zn[t]}var Jn=function(){return Ao.exports}(),Oo=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e(Je,{staticClass:"nav-container"},[e(mt,[e(Wn,{attrs:{"view-mode":n.viewMode},model:{value:n.heading,callback:function(r){n.heading=r},expression:"heading"}})],1),n.isOblique?e(mt,[e(Jn,{model:{value:n.heading,callback:function(r){n.heading=r},expression:"heading"}})],1):n._e(),e(mt,{attrs:{justify:"center"}},[e(Hn,{on:{"zoom-out":function(r){return n.zoomOut()},"zoom-in":function(r){return n.zoomIn()}}})],1),n.is3D?e(mt,{attrs:{justify:"center"}},[e(qn,{model:{value:n.tilt,callback:function(r){n.tilt=r},expression:"tilt"}})],1):n._e()],1)},Fo=[],mc="";const ot={THREE_D:"3d",TWO_D:"2d",OBLIQUE:"oblique"};function Lo(n){return n instanceof Ct?ot.OBLIQUE:n instanceof We?ot.THREE_D:ot.TWO_D}function No(n,t,e){const r=()=>{const i=n.getViewPointSync();i&&(t.value=i.heading,e.value=i.pitch)};if(n instanceof We)return n.getScene().postRender.addEventListener(r);if(n instanceof Ct||n instanceof Cr){const i=n.olMap.on("postrender",r);return()=>{ei(i)}}return()=>{}}async function Yn(n,t=!1,e=2){const r=await n.getViewPoint();t?r.distance*=e:r.distance/=e,r.animate=!0,r.duration=.5,r.cameraPosition=null,await n.gotoViewPoint(r)}const ko={components:{ObliqueRotation:Jn,TiltSlider:qn,VcsZoomButton:Hn,VcsCompass:Wn},setup(){const n=nt("vcsApp"),t=w(ot.TWO_D),e=w(0),r=w(0);let i=()=>{};const s=l=>{t.value=Lo(l),i(),i=No(l,e,r)};n.maps.mapActivated.addEventListener(s),s(n.maps.activeMap);const o=O({get(){return e.value},async set(l){let c;t.value===ot.OBLIQUE?c=await n.maps.activeMap.getViewPoint():c=n.maps.activeMap.getViewPointSync(),c.heading=l,n.maps.activeMap.gotoViewPoint(c)}}),a=O({get(){return r.value},set(l){const c=n.maps.activeMap.getViewPointSync();c.pitch=l,n.maps.activeMap.gotoViewPoint(c)}});return{viewMode:t,heading:o,tilt:a,is3D:O(()=>t.value===ot.THREE_D),isOblique:O(()=>t.value===ot.OBLIQUE),zoomIn(){Yn(n.maps.activeMap)},zoomOut(){Yn(n.maps.activeMap,!0)},left:()=>{},right:()=>{}}}},Zn={};var Vo=T(ko,Oo,Fo,!1,Po,"9d3cfb08",null,null);function Po(n){for(let t in Zn)this[t]=Zn[t]}var Kn=function(){return Vo.exports}(),Ro=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e(Hr,{staticClass:"h-full",attrs:{absolute:""}},[e(Pn),e(Gr,{attrs:{"fill-height":"",absolute:""}},[e(kn,{attrs:{"map-id":n.mapId}}),e(Kn),n.toolboxManagerVisible?e("ToolboxManagerComponent"):n._e(),e("WindowManagerComponent")],1),e(qr,{attrs:{app:"",absolute:""}},[n._v(" footer ")])],1)},Do=[],gc="";const jo={components:{MapNavigation:Kn,Navbar:Pn,VcsMap:kn,WindowManagerComponent:xs,ToolboxManagerComponent:Bs},props:{appId:{type:String,required:!0}},setup(n){const t=gt(),e=Ar(n.appId);Ir("vcsApp",e);const r={OpenlayersMap:"$vcs2d",CesiumMap:"$vcs3d",ObliqueMap:"$vcsObliqueView"},i={},s=e.maps.added.addEventListener(({className:c,name:u})=>{i[u]&&i[u]();const{action:f,destroy:h}=en({name:u,icon:r[c],title:`Activate ${u}`},u,e.maps);e.navbarManager.add({id:`mapButton-${u}`,location:z.MAP,action:f},q),i[u]=()=>{e.navbarManager.remove(`mapButton-${u}`),h()}}),o=e.maps.removed.addEventListener(({name:c})=>{i[c]&&(i[c](),delete i[c])});let a;const l=e.plugins.removed.addEventListener(async c=>{e.windowManager.removeOwner(c.name),e.navbarManager.removeOwner(c.name)});return qt(()=>{a=e.plugins.added.addEventListener(c=>{e.windowManager.removeOwner(c.name),e.navbarManager.removeOwner(c.name),c.onVcsAppMounted&&c.onVcsAppMounted(e)}),[...e.plugins].forEach(c=>{c.onVcsAppMounted&&c.onVcsAppMounted(e)})}),It(()=>{s&&s(),o&&o(),a&&a(),l&&l(),Object.values(i).forEach(c=>c())}),{mapId:`mapCollection-${t}`,toolboxManagerVisible:e.toolboxManager.state.visible}},provide(){return{language:window.navigator.language.split("-")[0]}}},Qn={};var Wo=T(jo,Ro,Do,!1,Bo,"1fdf3ccc",null,null);function Bo(n){for(let t in Qn)this[t]=Qn[t]}var Uo=function(){return Wo.exports}(),bc="";A.use(He);const Xn=new He({treeShake:!1,defaultAssets:{font:{family:"titillium-web"}},theme:{options:{customProperties:!0},themes:{light:{basic:"#FFFFFF",primary:"#409D76",accent:"#EDEDED",warning:"#FFCE00","gray-200":"#DEDEDE",gray:"#707070",secondary:"#222222",error:"#AA0000",info:"#2196F3",success:"#4CAF50"},dark:{basic:"#000000",primary:"#409D76",secondary:"#FFFFFF",accent:"#757575",warning:"#FFCE00",error:"#FF5252"}}},icons:{iconfont:"mdi",values:E({},Kr)}});/*!
* vue-i18n v8.25.0 
* (c) 2021 kazuya kawaguchi
* Released under the MIT License.
*/var tr=["compactDisplay","currency","currencyDisplay","currencySign","localeMatcher","notation","numberingSystem","signDisplay","style","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function pt(n,t){typeof console!="undefined"&&(console.warn("[vue-i18n] "+n),t&&console.warn(t.stack))}function Ho(n,t){typeof console!="undefined"&&(console.error("[vue-i18n] "+n),t&&console.error(t.stack))}var B=Array.isArray;function V(n){return n!==null&&typeof n=="object"}function Go(n){return typeof n=="boolean"}function $(n){return typeof n=="string"}var qo=Object.prototype.toString,zo="[object Object]";function U(n){return qo.call(n)===zo}function k(n){return n==null}function he(n){return typeof n=="function"}function Pt(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];var e=null,r=null;return n.length===1?V(n[0])||B(n[0])?r=n[0]:typeof n[0]=="string"&&(e=n[0]):n.length===2&&(typeof n[0]=="string"&&(e=n[0]),(V(n[1])||B(n[1]))&&(r=n[1])),{locale:e,params:r}}function dt(n){return JSON.parse(JSON.stringify(n))}function Jo(n,t){if(n.delete(t))return n}function Yo(n){var t=[];return n.forEach(function(e){return t.push(e)}),t}function Rt(n,t){return!!~n.indexOf(t)}var Zo=Object.prototype.hasOwnProperty;function Ko(n,t){return Zo.call(n,t)}function at(n){for(var t=arguments,e=Object(n),r=1;r<arguments.length;r++){var i=t[r];if(i!=null){var s=void 0;for(s in i)Ko(i,s)&&(V(i[s])?e[s]=at(e[s],i[s]):e[s]=i[s])}}return e}function Dt(n,t){if(n===t)return!0;var e=V(n),r=V(t);if(e&&r)try{var i=B(n),s=B(t);if(i&&s)return n.length===t.length&&n.every(function(l,c){return Dt(l,t[c])});if(!i&&!s){var o=Object.keys(n),a=Object.keys(t);return o.length===a.length&&o.every(function(l){return Dt(n[l],t[l])})}else return!1}catch{return!1}else return!e&&!r?String(n)===String(t):!1}function Qo(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function Xo(n){return n!=null&&Object.keys(n).forEach(function(t){typeof n[t]=="string"&&(n[t]=Qo(n[t]))}),n}function ta(n){n.prototype.hasOwnProperty("$i18n")||Object.defineProperty(n.prototype,"$i18n",{get:function(){return this._i18n}}),n.prototype.$t=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var i=this.$i18n;return i._t.apply(i,[t,i.locale,i._getMessages(),this].concat(e))},n.prototype.$tc=function(t,e){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];var s=this.$i18n;return s._tc.apply(s,[t,s.locale,s._getMessages(),this,e].concat(r))},n.prototype.$te=function(t,e){var r=this.$i18n;return r._te(t,r.locale,r._getMessages(),e)},n.prototype.$d=function(t){for(var e,r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];return(e=this.$i18n).d.apply(e,[t].concat(r))},n.prototype.$n=function(t){for(var e,r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];return(e=this.$i18n).n.apply(e,[t].concat(r))}}var ea={beforeCreate:function(){var t=this.$options;if(t.i18n=t.i18n||(t.__i18n?{}:null),t.i18n){if(t.i18n instanceof p){if(t.__i18n)try{var e=t.i18n&&t.i18n.messages?t.i18n.messages:{};t.__i18n.forEach(function(a){e=at(e,JSON.parse(a))}),Object.keys(e).forEach(function(a){t.i18n.mergeLocaleMessage(a,e[a])})}catch{}this._i18n=t.i18n,this._i18nWatcher=this._i18n.watchI18nData()}else if(U(t.i18n)){var r=this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof p?this.$root.$i18n:null;if(r&&(t.i18n.root=this.$root,t.i18n.formatter=r.formatter,t.i18n.fallbackLocale=r.fallbackLocale,t.i18n.formatFallbackMessages=r.formatFallbackMessages,t.i18n.silentTranslationWarn=r.silentTranslationWarn,t.i18n.silentFallbackWarn=r.silentFallbackWarn,t.i18n.pluralizationRules=r.pluralizationRules,t.i18n.preserveDirectiveContent=r.preserveDirectiveContent),t.__i18n)try{var i=t.i18n&&t.i18n.messages?t.i18n.messages:{};t.__i18n.forEach(function(a){i=at(i,JSON.parse(a))}),t.i18n.messages=i}catch{}var s=t.i18n,o=s.sharedMessages;o&&U(o)&&(t.i18n.messages=at(t.i18n.messages,o)),this._i18n=new p(t.i18n),this._i18nWatcher=this._i18n.watchI18nData(),(t.i18n.sync===void 0||!!t.i18n.sync)&&(this._localeWatcher=this.$i18n.watchLocale()),r&&r.onComponentInstanceCreated(this._i18n)}}else this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof p?this._i18n=this.$root.$i18n:t.parent&&t.parent.$i18n&&t.parent.$i18n instanceof p&&(this._i18n=t.parent.$i18n)},beforeMount:function(){var t=this.$options;t.i18n=t.i18n||(t.__i18n?{}:null),t.i18n?t.i18n instanceof p?(this._i18n.subscribeDataChanging(this),this._subscribing=!0):U(t.i18n)&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0):this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof p?(this._i18n.subscribeDataChanging(this),this._subscribing=!0):t.parent&&t.parent.$i18n&&t.parent.$i18n instanceof p&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0)},mounted:function(){this!==this.$root&&this.$options.__INTLIFY_META__&&this.$el&&this.$el.setAttribute("data-intlify",this.$options.__INTLIFY_META__)},beforeDestroy:function(){if(!!this._i18n){var t=this;this.$nextTick(function(){t._subscribing&&(t._i18n.unsubscribeDataChanging(t),delete t._subscribing),t._i18nWatcher&&(t._i18nWatcher(),t._i18n.destroyVM(),delete t._i18nWatcher),t._localeWatcher&&(t._localeWatcher(),delete t._localeWatcher)})}}},er={name:"i18n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},path:{type:String,required:!0},locale:{type:String},places:{type:[Array,Object]}},render:function(t,e){var r=e.data,i=e.parent,s=e.props,o=e.slots,a=i.$i18n;if(!!a){var l=s.path,c=s.locale,u=s.places,f=o(),h=a.i(l,c,na(f)||u?ra(f.default,u):f),d=!!s.tag&&s.tag!==!0||s.tag===!1?s.tag:"span";return d?t(d,r,h):h}}};function na(n){var t;for(t in n)if(t!=="default")return!1;return Boolean(t)}function ra(n,t){var e=t?ia(t):{};if(!n)return e;n=n.filter(function(i){return i.tag||i.text.trim()!==""});var r=n.every(oa);return n.reduce(r?sa:nr,e)}function ia(n){return Array.isArray(n)?n.reduce(nr,{}):Object.assign({},n)}function sa(n,t){return t.data&&t.data.attrs&&t.data.attrs.place&&(n[t.data.attrs.place]=t),n}function nr(n,t,e){return n[e]=t,n}function oa(n){return Boolean(n.data&&n.data.attrs&&n.data.attrs.place)}var rr={name:"i18n-n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},value:{type:Number,required:!0},format:{type:[String,Object]},locale:{type:String}},render:function(t,e){var r=e.props,i=e.parent,s=e.data,o=i.$i18n;if(!o)return null;var a=null,l=null;$(r.format)?a=r.format:V(r.format)&&(r.format.key&&(a=r.format.key),l=Object.keys(r.format).reduce(function(d,_){var m;return Rt(tr,_)?Object.assign({},d,(m={},m[_]=r.format[_],m)):d},null));var c=r.locale||o.locale,u=o._ntp(r.value,c,a,l),f=u.map(function(d,_){var m,y=s.scopedSlots&&s.scopedSlots[d.type];return y?y((m={},m[d.type]=d.value,m.index=_,m.parts=u,m)):d.value}),h=!!r.tag&&r.tag!==!0||r.tag===!1?r.tag:"span";return h?t(h,{attrs:s.attrs,class:s.class,staticClass:s.staticClass},f):f}};function aa(n,t,e){!ir(n,e)||sr(n,t,e)}function ca(n,t,e,r){if(!!ir(n,e)){var i=e.context.$i18n;ua(n,e)&&Dt(t.value,t.oldValue)&&Dt(n._localeMessage,i.getLocaleMessage(i.locale))||sr(n,t,e)}}function la(n,t,e,r){var i=e.context;if(!i){pt("Vue instance does not exists in VNode context");return}var s=e.context.$i18n||{};!t.modifiers.preserve&&!s.preserveDirectiveContent&&(n.textContent=""),n._vt=void 0,delete n._vt,n._locale=void 0,delete n._locale,n._localeMessage=void 0,delete n._localeMessage}function ir(n,t){var e=t.context;return e?e.$i18n?!0:(pt("VueI18n instance does not exists in Vue instance"),!1):(pt("Vue instance does not exists in VNode context"),!1)}function ua(n,t){var e=t.context;return n._locale===e.$i18n.locale}function sr(n,t,e){var r,i,s=t.value,o=fa(s),a=o.path,l=o.locale,c=o.args,u=o.choice;if(!a&&!l&&!c){pt("value type not supported");return}if(!a){pt("`path` is required in v-t directive");return}var f=e.context;u!=null?n._vt=n.textContent=(r=f.$i18n).tc.apply(r,[a,u].concat(or(l,c))):n._vt=n.textContent=(i=f.$i18n).t.apply(i,[a].concat(or(l,c))),n._locale=f.$i18n.locale,n._localeMessage=f.$i18n.getLocaleMessage(f.$i18n.locale)}function fa(n){var t,e,r,i;return $(n)?t=n:U(n)&&(t=n.path,e=n.locale,r=n.args,i=n.choice),{path:t,locale:e,args:r,choice:i}}function or(n,t){var e=[];return n&&e.push(n),t&&(Array.isArray(t)||U(t))&&e.push(t),e}var M;function pe(n){pe.installed=!0,M=n,M.version&&Number(M.version.split(".")[0]),ta(M),M.mixin(ea),M.directive("t",{bind:aa,update:ca,unbind:la}),M.component(er.name,er),M.component(rr.name,rr);var t=M.config.optionMergeStrategies;t.i18n=function(e,r){return r===void 0?e:r}}var ar=function(){this._caches=Object.create(null)};ar.prototype.interpolate=function(t,e){if(!e)return[t];var r=this._caches[t];return r||(r=da(t),this._caches[t]=r),_a(r,e)};var ha=/^(?:\d)+/,pa=/^(?:\w)+/;function da(n){for(var t=[],e=0,r="";e<n.length;){var i=n[e++];if(i==="{"){r&&t.push({type:"text",value:r}),r="";var s="";for(i=n[e++];i!==void 0&&i!=="}";)s+=i,i=n[e++];var o=i==="}",a=ha.test(s)?"list":o&&pa.test(s)?"named":"unknown";t.push({value:s,type:a})}else i==="%"?n[e]!=="{"&&(r+=i):r+=i}return r&&t.push({type:"text",value:r}),t}function _a(n,t){var e=[],r=0,i=Array.isArray(t)?"list":V(t)?"named":"unknown";if(i==="unknown")return e;for(;r<n.length;){var s=n[r];switch(s.type){case"text":e.push(s.value);break;case"list":e.push(t[parseInt(s.value,10)]);break;case"named":i==="named"&&e.push(t[s.value]);break}r++}return e}var x=0,_t=1,cr=2,lr=3,de=0,jt=1,Wt=2,tt=3,Y=4,Bt=5,Ut=6,Ht=7,xt=8,et=[];et[de]={ws:[de],ident:[tt,x],"[":[Y],eof:[Ht]},et[jt]={ws:[jt],".":[Wt],"[":[Y],eof:[Ht]},et[Wt]={ws:[Wt],ident:[tt,x],"0":[tt,x],number:[tt,x]},et[tt]={ident:[tt,x],"0":[tt,x],number:[tt,x],ws:[jt,_t],".":[Wt,_t],"[":[Y,_t],eof:[Ht,_t]},et[Y]={"'":[Bt,x],'"':[Ut,x],"[":[Y,cr],"]":[jt,lr],eof:xt,else:[Y,x]},et[Bt]={"'":[Y,x],eof:xt,else:[Bt,x]},et[Ut]={'"':[Y,x],eof:xt,else:[Ut,x]};var va=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function ma(n){return va.test(n)}function ga(n){var t=n.charCodeAt(0),e=n.charCodeAt(n.length-1);return t===e&&(t===34||t===39)?n.slice(1,-1):n}function ba(n){if(n==null)return"eof";var t=n.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:return n;case 95:case 36:case 45:return"ident";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return"ident"}function ya(n){var t=n.trim();return n.charAt(0)==="0"&&isNaN(n)?!1:ma(t)?ga(t):"*"+t}function wa(n){var t=[],e=-1,r=de,i=0,s,o,a,l,c,u,f,h=[];h[_t]=function(){o!==void 0&&(t.push(o),o=void 0)},h[x]=function(){o===void 0?o=a:o+=a},h[cr]=function(){h[x](),i++},h[lr]=function(){if(i>0)i--,r=Y,h[x]();else{if(i=0,o===void 0||(o=ya(o),o===!1))return!1;h[_t]()}};function d(){var _=n[e+1];if(r===Bt&&_==="'"||r===Ut&&_==='"')return e++,a="\\"+_,h[x](),!0}for(;r!==null;)if(e++,s=n[e],!(s==="\\"&&d())){if(l=ba(s),f=et[r],c=f[l]||f.else||xt,c===xt||(r=c[0],u=h[c[1]],u&&(a=c[2],a=a===void 0?s:a,u()===!1)))return;if(r===Ht)return t}}var _e=function(){this._cache=Object.create(null)};_e.prototype.parsePath=function(t){var e=this._cache[t];return e||(e=wa(t),e&&(this._cache[t]=e)),e||[]},_e.prototype.getPathValue=function(t,e){if(!V(t))return null;var r=this.parsePath(e);if(r.length===0)return null;for(var i=r.length,s=t,o=0;o<i;){var a=s[r[o]];if(a==null)return null;s=a,o++}return s};var Sa=/<\/?[\w\s="/.':;#-\/]+>/,Ea=/(?:@(?:\.[a-z]+)?:(?:[\w\-_|.]+|\([\w\-_|.]+\)))/g,Ta=/^@(?:\.([a-z]+))?:/,$a=/[()]/g,ur={upper:function(n){return n.toLocaleUpperCase()},lower:function(n){return n.toLocaleLowerCase()},capitalize:function(n){return""+n.charAt(0).toLocaleUpperCase()+n.substr(1)}},ve=new ar,p=function(t){var e=this;t===void 0&&(t={}),!M&&typeof window!="undefined"&&window.Vue&&pe(window.Vue);var r=t.locale||"en-US",i=t.fallbackLocale===!1?!1:t.fallbackLocale||"en-US",s=t.messages||{},o=t.dateTimeFormats||{},a=t.numberFormats||{};this._vm=null,this._formatter=t.formatter||ve,this._modifiers=t.modifiers||{},this._missing=t.missing||null,this._root=t.root||null,this._sync=t.sync===void 0?!0:!!t.sync,this._fallbackRoot=t.fallbackRoot===void 0?!0:!!t.fallbackRoot,this._formatFallbackMessages=t.formatFallbackMessages===void 0?!1:!!t.formatFallbackMessages,this._silentTranslationWarn=t.silentTranslationWarn===void 0?!1:t.silentTranslationWarn,this._silentFallbackWarn=t.silentFallbackWarn===void 0?!1:!!t.silentFallbackWarn,this._dateTimeFormatters={},this._numberFormatters={},this._path=new _e,this._dataListeners=new Set,this._componentInstanceCreatedListener=t.componentInstanceCreatedListener||null,this._preserveDirectiveContent=t.preserveDirectiveContent===void 0?!1:!!t.preserveDirectiveContent,this.pluralizationRules=t.pluralizationRules||{},this._warnHtmlInMessage=t.warnHtmlInMessage||"off",this._postTranslation=t.postTranslation||null,this._escapeParameterHtml=t.escapeParameterHtml||!1,this.getChoiceIndex=function(l,c){var u=Object.getPrototypeOf(e);if(u&&u.getChoiceIndex){var f=u.getChoiceIndex;return f.call(e,l,c)}var h=function(d,_){return d=Math.abs(d),_===2?d?d>1?1:0:1:d?Math.min(d,2):0};return e.locale in e.pluralizationRules?e.pluralizationRules[e.locale].apply(e,[l,c]):h(l,c)},this._exist=function(l,c){return!l||!c?!1:!!(!k(e._path.getPathValue(l,c))||l[c])},(this._warnHtmlInMessage==="warn"||this._warnHtmlInMessage==="error")&&Object.keys(s).forEach(function(l){e._checkLocaleMessage(l,e._warnHtmlInMessage,s[l])}),this._initVM({locale:r,fallbackLocale:i,messages:s,dateTimeFormats:o,numberFormats:a})},b={vm:{configurable:!0},messages:{configurable:!0},dateTimeFormats:{configurable:!0},numberFormats:{configurable:!0},availableLocales:{configurable:!0},locale:{configurable:!0},fallbackLocale:{configurable:!0},formatFallbackMessages:{configurable:!0},missing:{configurable:!0},formatter:{configurable:!0},silentTranslationWarn:{configurable:!0},silentFallbackWarn:{configurable:!0},preserveDirectiveContent:{configurable:!0},warnHtmlInMessage:{configurable:!0},postTranslation:{configurable:!0}};p.prototype._checkLocaleMessage=function(t,e,r){var i=[],s=function(o,a,l,c){if(U(l))Object.keys(l).forEach(function(h){var d=l[h];U(d)?(c.push(h),c.push("."),s(o,a,d,c),c.pop(),c.pop()):(c.push(h),s(o,a,d,c),c.pop())});else if(B(l))l.forEach(function(h,d){U(h)?(c.push("["+d+"]"),c.push("."),s(o,a,h,c),c.pop(),c.pop()):(c.push("["+d+"]"),s(o,a,h,c),c.pop())});else if($(l)){var u=Sa.test(l);if(u){var f="Detected HTML in message '"+l+"' of keypath '"+c.join("")+"' at '"+a+"'. Consider component interpolation with '<i18n>' to avoid XSS. See https://bit.ly/2ZqJzkp";o==="warn"?pt(f):o==="error"&&Ho(f)}}};s(e,t,r,i)},p.prototype._initVM=function(t){var e=M.config.silent;M.config.silent=!0,this._vm=new M({data:t}),M.config.silent=e},p.prototype.destroyVM=function(){this._vm.$destroy()},p.prototype.subscribeDataChanging=function(t){this._dataListeners.add(t)},p.prototype.unsubscribeDataChanging=function(t){Jo(this._dataListeners,t)},p.prototype.watchI18nData=function(){var t=this;return this._vm.$watch("$data",function(){for(var e=Yo(t._dataListeners),r=e.length;r--;)M.nextTick(function(){e[r]&&e[r].$forceUpdate()})},{deep:!0})},p.prototype.watchLocale=function(){if(!this._sync||!this._root)return null;var t=this._vm;return this._root.$i18n.vm.$watch("locale",function(e){t.$set(t,"locale",e),t.$forceUpdate()},{immediate:!0})},p.prototype.onComponentInstanceCreated=function(t){this._componentInstanceCreatedListener&&this._componentInstanceCreatedListener(t,this)},b.vm.get=function(){return this._vm},b.messages.get=function(){return dt(this._getMessages())},b.dateTimeFormats.get=function(){return dt(this._getDateTimeFormats())},b.numberFormats.get=function(){return dt(this._getNumberFormats())},b.availableLocales.get=function(){return Object.keys(this.messages).sort()},b.locale.get=function(){return this._vm.locale},b.locale.set=function(n){this._vm.$set(this._vm,"locale",n)},b.fallbackLocale.get=function(){return this._vm.fallbackLocale},b.fallbackLocale.set=function(n){this._localeChainCache={},this._vm.$set(this._vm,"fallbackLocale",n)},b.formatFallbackMessages.get=function(){return this._formatFallbackMessages},b.formatFallbackMessages.set=function(n){this._formatFallbackMessages=n},b.missing.get=function(){return this._missing},b.missing.set=function(n){this._missing=n},b.formatter.get=function(){return this._formatter},b.formatter.set=function(n){this._formatter=n},b.silentTranslationWarn.get=function(){return this._silentTranslationWarn},b.silentTranslationWarn.set=function(n){this._silentTranslationWarn=n},b.silentFallbackWarn.get=function(){return this._silentFallbackWarn},b.silentFallbackWarn.set=function(n){this._silentFallbackWarn=n},b.preserveDirectiveContent.get=function(){return this._preserveDirectiveContent},b.preserveDirectiveContent.set=function(n){this._preserveDirectiveContent=n},b.warnHtmlInMessage.get=function(){return this._warnHtmlInMessage},b.warnHtmlInMessage.set=function(n){var t=this,e=this._warnHtmlInMessage;if(this._warnHtmlInMessage=n,e!==n&&(n==="warn"||n==="error")){var r=this._getMessages();Object.keys(r).forEach(function(i){t._checkLocaleMessage(i,t._warnHtmlInMessage,r[i])})}},b.postTranslation.get=function(){return this._postTranslation},b.postTranslation.set=function(n){this._postTranslation=n},p.prototype._getMessages=function(){return this._vm.messages},p.prototype._getDateTimeFormats=function(){return this._vm.dateTimeFormats},p.prototype._getNumberFormats=function(){return this._vm.numberFormats},p.prototype._warnDefault=function(t,e,r,i,s,o){if(!k(r))return r;if(this._missing){var a=this._missing.apply(null,[t,e,i,s]);if($(a))return a}if(this._formatFallbackMessages){var l=Pt.apply(void 0,s);return this._render(e,o,l.params,e)}else return e},p.prototype._isFallbackRoot=function(t){return!t&&!k(this._root)&&this._fallbackRoot},p.prototype._isSilentFallbackWarn=function(t){return this._silentFallbackWarn instanceof RegExp?this._silentFallbackWarn.test(t):this._silentFallbackWarn},p.prototype._isSilentFallback=function(t,e){return this._isSilentFallbackWarn(e)&&(this._isFallbackRoot()||t!==this.fallbackLocale)},p.prototype._isSilentTranslationWarn=function(t){return this._silentTranslationWarn instanceof RegExp?this._silentTranslationWarn.test(t):this._silentTranslationWarn},p.prototype._interpolate=function(t,e,r,i,s,o,a){if(!e)return null;var l=this._path.getPathValue(e,r);if(B(l)||U(l))return l;var c;if(k(l))if(U(e)){if(c=e[r],!($(c)||he(c)))return null}else return null;else if($(l)||he(l))c=l;else return null;return $(c)&&(c.indexOf("@:")>=0||c.indexOf("@.")>=0)&&(c=this._link(t,e,c,i,"raw",o,a)),this._render(c,s,o,r)},p.prototype._link=function(t,e,r,i,s,o,a){var l=r,c=l.match(Ea);for(var u in c)if(!!c.hasOwnProperty(u)){var f=c[u],h=f.match(Ta),d=h[0],_=h[1],m=f.replace(d,"").replace($a,"");if(Rt(a,m))return l;a.push(m);var y=this._interpolate(t,e,m,i,s==="raw"?"string":s,s==="raw"?void 0:o,a);if(this._isFallbackRoot(y)){if(!this._root)throw Error("unexpected error");var W=this._root.$i18n;y=W._translate(W._getMessages(),W.locale,W.fallbackLocale,m,i,s,o)}y=this._warnDefault(t,m,y,i,B(o)?o:[o],s),this._modifiers.hasOwnProperty(_)?y=this._modifiers[_](y):ur.hasOwnProperty(_)&&(y=ur[_](y)),a.pop(),l=y?l.replace(f,y):l}return l},p.prototype._createMessageContext=function(t,e,r,i){var s=this,o=B(t)?t:[],a=V(t)?t:{},l=function(h){return o[h]},c=function(h){return a[h]},u=this._getMessages(),f=this.locale;return{list:l,named:c,values:t,formatter:e,path:r,messages:u,locale:f,linked:function(h){return s._interpolate(f,u[f]||{},h,null,i,void 0,[h])}}},p.prototype._render=function(t,e,r,i){if(he(t))return t(this._createMessageContext(r,this._formatter||ve,i,e));var s=this._formatter.interpolate(t,r,i);return s||(s=ve.interpolate(t,r,i)),e==="string"&&!$(s)?s.join(""):s},p.prototype._appendItemToChain=function(t,e,r){var i=!1;return Rt(t,e)||(i=!0,e&&(i=e[e.length-1]!=="!",e=e.replace(/!/g,""),t.push(e),r&&r[e]&&(i=r[e]))),i},p.prototype._appendLocaleToChain=function(t,e,r){var i,s=e.split("-");do{var o=s.join("-");i=this._appendItemToChain(t,o,r),s.splice(-1,1)}while(s.length&&i===!0);return i},p.prototype._appendBlockToChain=function(t,e,r){for(var i=!0,s=0;s<e.length&&Go(i);s++){var o=e[s];$(o)&&(i=this._appendLocaleToChain(t,o,r))}return i},p.prototype._getLocaleChain=function(t,e){if(t==="")return[];this._localeChainCache||(this._localeChainCache={});var r=this._localeChainCache[t];if(!r){e||(e=this.fallbackLocale),r=[];for(var i=[t];B(i);)i=this._appendBlockToChain(r,i,e);var s;B(e)?s=e:V(e)?e.default?s=e.default:s=null:s=e,$(s)?i=[s]:i=s,i&&this._appendBlockToChain(r,i,null),this._localeChainCache[t]=r}return r},p.prototype._translate=function(t,e,r,i,s,o,a){for(var l=this._getLocaleChain(e,r),c,u=0;u<l.length;u++){var f=l[u];if(c=this._interpolate(f,t[f],i,s,o,a,[i]),!k(c))return c}return null},p.prototype._t=function(t,e,r,i){for(var s,o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];if(!t)return"";var l=Pt.apply(void 0,o);this._escapeParameterHtml&&(l.params=Xo(l.params));var c=l.locale||e,u=this._translate(r,c,this.fallbackLocale,t,i,"string",l.params);if(this._isFallbackRoot(u)){if(!this._root)throw Error("unexpected error");return(s=this._root).$t.apply(s,[t].concat(o))}else return u=this._warnDefault(c,t,u,i,o,"string"),this._postTranslation&&u!==null&&u!==void 0&&(u=this._postTranslation(u,t)),u},p.prototype.t=function(t){for(var e,r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];return(e=this)._t.apply(e,[t,this.locale,this._getMessages(),null].concat(r))},p.prototype._i=function(t,e,r,i,s){var o=this._translate(r,e,this.fallbackLocale,t,i,"raw",s);if(this._isFallbackRoot(o)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.i(t,e,s)}else return this._warnDefault(e,t,o,i,[s],"raw")},p.prototype.i=function(t,e,r){return t?($(e)||(e=this.locale),this._i(t,e,this._getMessages(),null,r)):""},p.prototype._tc=function(t,e,r,i,s){for(var o,a=[],l=arguments.length-5;l-- >0;)a[l]=arguments[l+5];if(!t)return"";s===void 0&&(s=1);var c={count:s,n:s},u=Pt.apply(void 0,a);return u.params=Object.assign(c,u.params),a=u.locale===null?[u.params]:[u.locale,u.params],this.fetchChoice((o=this)._t.apply(o,[t,e,r,i].concat(a)),s)},p.prototype.fetchChoice=function(t,e){if(!t||!$(t))return null;var r=t.split("|");return e=this.getChoiceIndex(e,r.length),r[e]?r[e].trim():t},p.prototype.tc=function(t,e){for(var r,i=[],s=arguments.length-2;s-- >0;)i[s]=arguments[s+2];return(r=this)._tc.apply(r,[t,this.locale,this._getMessages(),null,e].concat(i))},p.prototype._te=function(t,e,r){for(var i=[],s=arguments.length-3;s-- >0;)i[s]=arguments[s+3];var o=Pt.apply(void 0,i).locale||e;return this._exist(r[o],t)},p.prototype.te=function(t,e){return this._te(t,this.locale,this._getMessages(),e)},p.prototype.getLocaleMessage=function(t){return dt(this._vm.messages[t]||{})},p.prototype.setLocaleMessage=function(t,e){(this._warnHtmlInMessage==="warn"||this._warnHtmlInMessage==="error")&&this._checkLocaleMessage(t,this._warnHtmlInMessage,e),this._vm.$set(this._vm.messages,t,e)},p.prototype.mergeLocaleMessage=function(t,e){(this._warnHtmlInMessage==="warn"||this._warnHtmlInMessage==="error")&&this._checkLocaleMessage(t,this._warnHtmlInMessage,e),this._vm.$set(this._vm.messages,t,at(typeof this._vm.messages[t]!="undefined"&&Object.keys(this._vm.messages[t]).length?Object.assign({},this._vm.messages[t]):{},e))},p.prototype.getDateTimeFormat=function(t){return dt(this._vm.dateTimeFormats[t]||{})},p.prototype.setDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,e),this._clearDateTimeFormat(t,e)},p.prototype.mergeDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,at(this._vm.dateTimeFormats[t]||{},e)),this._clearDateTimeFormat(t,e)},p.prototype._clearDateTimeFormat=function(t,e){for(var r in e){var i=t+"__"+r;!this._dateTimeFormatters.hasOwnProperty(i)||delete this._dateTimeFormatters[i]}},p.prototype._localizeDateTime=function(t,e,r,i,s){for(var o=e,a=i[o],l=this._getLocaleChain(e,r),c=0;c<l.length;c++){var u=o,f=l[c];if(a=i[f],o=f,!(k(a)||k(a[s])))break}if(k(a)||k(a[s]))return null;var h=a[s],d=o+"__"+s,_=this._dateTimeFormatters[d];return _||(_=this._dateTimeFormatters[d]=new Intl.DateTimeFormat(o,h)),_.format(t)},p.prototype._d=function(t,e,r){if(!r)return new Intl.DateTimeFormat(e).format(t);var i=this._localizeDateTime(t,e,this.fallbackLocale,this._getDateTimeFormats(),r);if(this._isFallbackRoot(i)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.d(t,r,e)}else return i||""},p.prototype.d=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var i=this.locale,s=null;return e.length===1?$(e[0])?s=e[0]:V(e[0])&&(e[0].locale&&(i=e[0].locale),e[0].key&&(s=e[0].key)):e.length===2&&($(e[0])&&(s=e[0]),$(e[1])&&(i=e[1])),this._d(t,i,s)},p.prototype.getNumberFormat=function(t){return dt(this._vm.numberFormats[t]||{})},p.prototype.setNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,e),this._clearNumberFormat(t,e)},p.prototype.mergeNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,at(this._vm.numberFormats[t]||{},e)),this._clearNumberFormat(t,e)},p.prototype._clearNumberFormat=function(t,e){for(var r in e){var i=t+"__"+r;!this._numberFormatters.hasOwnProperty(i)||delete this._numberFormatters[i]}},p.prototype._getNumberFormatter=function(t,e,r,i,s,o){for(var a=e,l=i[a],c=this._getLocaleChain(e,r),u=0;u<c.length;u++){var f=a,h=c[u];if(l=i[h],a=h,!(k(l)||k(l[s])))break}if(k(l)||k(l[s]))return null;var d=l[s],_;if(o)_=new Intl.NumberFormat(a,Object.assign({},d,o));else{var m=a+"__"+s;_=this._numberFormatters[m],_||(_=this._numberFormatters[m]=new Intl.NumberFormat(a,d))}return _},p.prototype._n=function(t,e,r,i){if(!p.availabilities.numberFormat)return"";if(!r){var s=i?new Intl.NumberFormat(e,i):new Intl.NumberFormat(e);return s.format(t)}var o=this._getNumberFormatter(t,e,this.fallbackLocale,this._getNumberFormats(),r,i),a=o&&o.format(t);if(this._isFallbackRoot(a)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.n(t,Object.assign({},{key:r,locale:e},i))}else return a||""},p.prototype.n=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var i=this.locale,s=null,o=null;return e.length===1?$(e[0])?s=e[0]:V(e[0])&&(e[0].locale&&(i=e[0].locale),e[0].key&&(s=e[0].key),o=Object.keys(e[0]).reduce(function(a,l){var c;return Rt(tr,l)?Object.assign({},a,(c={},c[l]=e[0][l],c)):a},null)):e.length===2&&($(e[0])&&(s=e[0]),$(e[1])&&(i=e[1])),this._n(t,i,s,o)},p.prototype._ntp=function(t,e,r,i){if(!p.availabilities.numberFormat)return[];if(!r){var s=i?new Intl.NumberFormat(e,i):new Intl.NumberFormat(e);return s.formatToParts(t)}var o=this._getNumberFormatter(t,e,this.fallbackLocale,this._getNumberFormats(),r,i),a=o&&o.formatToParts(t);if(this._isFallbackRoot(a)){if(!this._root)throw Error("unexpected error");return this._root.$i18n._ntp(t,e,r,i)}else return a||[]},Object.defineProperties(p.prototype,b);var me;Object.defineProperty(p,"availabilities",{get:function(){if(!me){var t=typeof Intl!="undefined";me={dateTimeFormat:t&&typeof Intl.DateTimeFormat!="undefined",numberFormat:t&&typeof Intl.NumberFormat!="undefined"}}return me}}),p.install=pe,p.version="8.25.0";var fr=p;const xa={general:{save:"Save",reset:"Reset"},search:{title:"Suche",placeholder:"Search for Street, Address, Landmark, POI"},oblique:{title:"Schr\xE4gansicht",south:"S\xFCd",west:"West",east:"Ost",north:"Nord"},"action-content":{"camera-flight":"Camera Flight {index} in one line",interpolation:"Interpolation","total-flight-duration":"Total flight duration","circular-flight-path":"Circular flight path","show-flight-path":"Show flight path","flight-viewpoint":"Flight viewpoint","viewpoint-step":"Viewpoint step {index}"},"layer-tree":{title:"Inhalte / Umgebung",search:{placeholder:"Element, Ansicht..."}},components:{title:"Components"},tools:{title:"Werkzeuge"},"poi-view":{title:"POI & Attributes"},"endless-list":{"load-more":"Weitere Eintr\xE4ge laden","amount-loaded":"{loaded} von {total} Eintr\xE4ge "},"context-menu":{regular:{"zoom-in":"Zoom in","zoom-out":"Zoom out","rotate-90-cw":"Rotate 90\xB0 CW","rotate-90-ccw":"Rotate 90\xB0 CCW","pedestrian-mode":"Predestrian mode","reset-view":"Reset view",paste:"Paste","view-coordinates":"View coordinates","copy-coordinates":"Copy coordinates"}}},Ia={general:{save:"Save",reset:"Reset"},search:{title:"Suche",placeholder:"Search for Street, Address, Landmark, POI"},oblique:{title:"Schr\xE4gansicht",south:"S\xFCd",west:"West",east:"Ost",north:"Nord"},"action-content":{"camera-flight":"Camera Flight {index} in one line",interpolation:"Interpolation","total-flight-duration":"Total flight duration","circular-flight-path":"Circular flight path","show-flight-path":"Show flight path","flight-viewpoint":"Flight viewpoint","viewpoint-step":"Viewpoint step {index}"},"layer-tree":{title:"Inhalte / Umgebung",search:{placeholder:"Element, Ansicht..."}},components:{title:"Components"},tools:{title:"Werkzeuge"},contextMenu:{regular:{"zoom-in":"Zoom in","zoom-out":"Zoom out","rotate-90-cw":"Rotate 90\xB0 CW","rotate-90-ccw":"Rotate 90\xB0 CCW","pedestrian-mode":"Predestrian mode","reset-view":"Reset view",paste:"Paste","view-coordinates":"View coordinates","copy-coordinates":"Copy coordinates"}}};A.use(fr);const hr=new fr({locale:"de",messages:{en:Ia,de:xa}});A.filter("translate",(n,t)=>hr.t(n,t));class Ca{constructor(){this.onAdded=new rt,this.onRemoved=new rt,this.state=K({visible:!0,groups:{}})}setGroupOpen(t,e){Object.values(this.state.groups).forEach(r=>{r.id===t?A.set(this.state.groups,r.id,N(E({},r),{open:e})):A.set(this.state.groups,r.id,N(E({},r),{open:!1}))})}toggle(){A.set(this.state,"visible",!this.state.visible)}has(t){return!!this.get(t)}get(t){return Object.values(this.state.groups).map(e=>e.options).flat().find(e=>e&&e.id===t)}setDisabled(t,e){const[r,i]=this.getSlotIndexAndEntry(t),s=i.options.find(o=>o.id===t);s.disabled=e,A.set(this.state.groups,r,i)}getSlotIndexAndEntry(t){return Object.entries(this.state.groups).find(e=>e[1]&&e[1].options&&e[1].options.find(r=>r.id===t))}selectOption(t){const[e,r]=this.getSlotIndexAndEntry(t),i=r.options.find(s=>s.id===t);i&&(i.selected=!i.selected),A.set(this.state.groups,e,E({},r))}getSlotIndexFor(t){const[e]=Object.entries(this.state.groups).find(r=>r[1].options.find(i=>i.id===t));return e}getNumberOfUsedSlots(){return Object.values(this.state.groups).reduce((t,e)=>e.type==="toggleButton"||e.type==="customComponent"||e.options&&e.options.length?t+1:t,0)}bringToTop(t){const[e,r]=this.getSlotIndexAndEntry(t),i=[r.options.find(s=>s.id===t),...r.options.filter(s=>s.id!==t)];A.set(this.state.groups,e,N(E({},r),{options:i}))}addToolboxItem(t,e){if(this.has(t.id))throw new Error(`Toolbox-Item with id ${t.id} has already been registered`);A.set(this.state.groups,e,N(E({},this.state.groups[e]),{options:[...this.state.groups[e].options,t]})),this.onAdded.raiseEvent(t.id)}addToolboxGroup(t,e){if(this.state.groups[e])throw new Error(`Toolbox-Group with slot-id ${e} has already been registered`);A.set(this.state.groups,e,t)}removeToolboxItem(t){const e=this.getSlotIndexFor(t);if(!e)throw new Error(`Cannot find slot index for toolbar item with id ${t}`);A.set(this.state.groups,e,N(E({},this.state.groups[e]),{options:[...this.state.groups[e].options.filter(r=>r.id!==t)]})),this.onRemoved.raiseEvent(t)}}const v={NONE:0,INACTIVE:1,LOADING:2,ACTIVE:3,INDETERMINATE:4},pr={[v.INACTIVE]:"$vcsCheckbox",[v.ACTIVE]:"$vcsCheckboxChecked",[v.INDETERMINATE]:"$vcsCheckboxIndeterminate",[v.LOADING]:"$vcsProgress"};function Aa(n,t,e){g(n,String),g(t==null?void 0:t.value,Object.values(v)),g(e,Function);const r=t.value,i={name:n,title:"Activate",icon:pr[r],callback:e},s=zt(t,()=>{i.icon=pr[t.value]});return{action:i,destroy:s}}const dr=Symbol("ActionWeight"),H=new Mr;class Z{static get className(){return"ContentTreeItem"}constructor(t,e){this._app=e,this._actions=w([]),this._name=t.name,this._visible=w(!0),this._clickable=w(!0),this._disabled=w(!1),this._state=w(v.NONE),this._stateActionListener=null,this._infoUrl=null,this.infoUrl=t.infoUrl,this._title=w(t.title),this._icon=w(t.icon),this._children=w([]),this._weight=ai(t.weight,0),this.initOpen=ci(t.initOpen,!1),this.weightChanged=new rt}get className(){return this.constructor.className}get name(){return this._name}get actions(){return this._actions.value.slice()}get visible(){return this._visible.value}set visible(t){this._visible.value=!!t}get clickable(){return this._clickable.value}set clickable(t){this._clickable.value=!!t}get disabled(){return this._disabled.value}set disabled(t){this._disabled.value=!!t}get state(){return this._state.value}set state(t){g(t,Object.values(v)),this._state.value!==t&&(this._state.value=t,this._setStateAction())}get infoUrl(){return this._infoUrl}set infoUrl(t){if(lt(t,String),this._infoUrl!==t){this._infoUrl=t;const e="infoUrl";if(this._infoUrl){const r=sn({name:e,title:"Info",icon:"$vcsInfo"},this._infoUrl);this.addAction(r,6)}else this.removeAction(e)}}get title(){return this._title.value}set title(t){lt(t,[String,Object]),this._title.value=t}get icon(){return this._icon.value}set icon(t){lt(t,[String,HTMLElement]),this._icon.value=t}get weight(){return this._weight}set weight(t){g(t,Number),t!==this._weight&&(this._weight=t,this.weightChanged.raiseEvent(t))}_setStateAction(){const t="stateAction";if(this.state!==v.NONE&&!this._stateActionListener){const{action:e,destroy:r}=Aa(t,this._state,this.clicked.bind(this));this.addAction(e,0),this._stateActionListener=()=>{this.removeAction(t),r()}}else this._stateActionListener&&this.state===v.NONE&&(this._stateActionListener(),this._stateActionListener=null)}_getActionIndex(t){return this._actions.value.findIndex(e=>e.name===t)}addAction(t,e=11){if(g(t.name,String),lt(e,Number),this._getActionIndex(t.name)>-1)throw new Error("Action names must be unique");t[dr]=e;const i=this._actions.value.findIndex(s=>s[dr]>e);i>-1?this._actions.value.splice(i,0,t):this._actions.value.push(t)}removeAction(t){const e=this._getActionIndex(t);e>-1&&this._actions.value.splice(e,1)}async clicked(){}getTreeViewItem(){const t=this.clicked.bind(this);return K({name:this._name,visible:this._visible,clickable:this._clickable,disabled:this._disabled,state:this._state,title:this._title,icon:this._icon,actions:this._actions,children:this._children,visibleChildren:O(()=>this._children.value.filter(e=>e.visible)),clicked:t})}toJSON(){const t={type:this.className,name:this.name};return this.title&&(t.title=this.title),this.icon&&(t.icon=this.icon),this.infoUrl&&(t.infoUrl=this.infoUrl),this.initOpen&&(t.initOpen=this.initOpen),this.weight&&(t.weight=this.weight),t}destroy(){this._stateActionListener&&this._stateActionListener(),this.actions.splice(0),this._children.value.splice(0)}}H.registerClass(Z.className,Z);const ge=Symbol("SubTree");class Gt extends Z{static get className(){return"SubContentTreeItem"}constructor(t,e){super(t,e);if(!this.name||this.name.split(".").length>1)throw new Error(`Sub trees may only be defined on top level. Tree ${this.name} is nested or undefined`);this.clickable=!1}getTreeViewItem(){const t=super.getTreeViewItem();return t[ge]=!0,t}}H.registerClass(Gt.className,Gt);var Ma=function(){var n=this,t=n.$createElement,e=n._self._c||t;return n.tree&&n.tree.length?e("VcsTreeview",{attrs:{items:n.tree,open:n.open,"has-searchbar":!0,"searchbar-placeholder":"layer-tree.search.placeholder","item-children":"visibleChildren"},on:{"update:open":function(r){n.open=r}}}):n._e()},Oa=[];const Fa={name:"VcsLayerTree",components:{VcsTreeview:Qr},props:{windowState:{type:Object,required:!0}},setup(n){const t=nt("vcsApp"),{id:e}=n.windowState,r=t.contentTree.getTreeOpenStateRef(e);return{tree:t.contentTree.getComputedVisibleTree(e),open:r}}},_r={};var La=T(Fa,Ma,Oa,!1,Na,null,null,null);function Na(n){for(let t in _r)this[t]=_r[t]}var ka=function(){return La.exports}();const be=Symbol("SubTreeOpenState");class Va extends Fr{constructor(t){super();this._app=t;const e=()=>{this._suspendListeners||this._setTreeView()};this._weightListeners=new Map,this._listeners=[this.added.addEventListener(r=>{e(),this._weightListeners.set(r.name,r.weightChanged.addEventListener(e))}),this.removed.addEventListener(r=>{e(),this._weightListeners.has(r.name)&&(this._weightListeners.get(r.name)(),this._weightListeners.delete(r.name))})],this._defaultSubtreeItem=new Gt({name:"Content",icon:"$vcsLayers"},t),this._subTreeViewItems=w(new Map),this._subTreeListeners=[],this._suspendListeners=!1}_clearSubTrees(){this._subTreeViewItems.value.clear(),this._subTreeListeners.forEach(t=>{t()})}_createSubtreeActionButton(t,e=C.STATIC){const r=gt(),i=this._app,{action:s,destroy:o}=nn({name:t.name,icon:t.icon,title:t.title},{component:ka,slot:e,id:r,state:{headerIcon:t.icon,headerTitle:t.title}},i.windowManager,q);return this._app.navbarManager.add({id:r,action:s,location:z.CONTENT},q),this._subTreeViewItems.value.set(r,t),()=>{i.windowManager.remove(r),i.navbarManager.remove(r),o()}}_setTreeView(){this._clearSubTrees();const t=new Map;[...this._array].sort((o,a)=>{const l=o.name.split(".").length,c=a.name.split(".").length;return l===c?o.weight===a.weight?0:o.weight>a.weight?-1:1:l>c?1:-1}).forEach(o=>{const a=o.getTreeViewItem(),l=a.name.split("."),c=l.pop();let u={children:t};l.forEach(f=>{!u||(u=u.children.get(f))}),u&&u.children.set(c,{treeViewItem:a,children:new Map})});const e=({treeViewItem:o,children:a})=>{const l=[...a.values()];return l.forEach(e),o.children.splice(0),o.children.push(...l.map(c=>c.treeViewItem)),o},r=[...t.values()].map(e),i=this._defaultSubtreeItem.getTreeViewItem();i.children.splice(0),i.children.push(...r.filter(o=>!o[ge]));const s=[i,...r.filter(o=>o[ge])];this._subTreeListeners=s.map(o=>this._createSubtreeActionButton(o))}get subTreeIds(){return[...this._subTreeViewItems.value.keys()]}getComputedVisibleTree(t){return O(()=>{const e=this._subTreeViewItems.value;return e.has(t)?e.get(t).visibleChildren:[]})}_getSubTree(t){return this._subTreeViewItems.value.get(t)}getChildrenForSubTree(t){const e=this._getSubTree(t);if(e){if(e===this._subTreeViewItems.value.values().next().value){const r=[...this._subTreeViewItems.value.values()].filter(i=>i!==e).map(i=>i.name);return this._array.filter(i=>!r.some(s=>i.name.startsWith(s)))}return this._array.filter(r=>r.name.startsWith(e.name))}return[]}getTreeOpenStateRef(t){const e=this._getSubTree(t);return e?(e[be]||(e[be]=w(this.getChildrenForSubTree(t).filter(r=>r.initOpen).map(r=>r.name))),e[be]):w([])}destroy(){this._clearSubTrees(),this._defaultSubtreeItem.destroy(),this._listeners.forEach(t=>{t()}),this._weightListeners.forEach(t=>{t()}),this._weightListeners.clear(),super.destroy()}}function Pa(n){const t=new Va(n),e=Be(t,()=>n.dynamicContextId,null,i=>Or(n.contentTreeClassRegistry,i,n),Z),r=e.parseItems.bind(e);return e.parseItems=async function(...s){this._suspendListeners=!0,await r(...s),this._suspendListeners=!1,this._setTreeView()},e}function Ra(){return ie("VcsUiApp")}class Da extends Lr{constructor(){super();this._plugins=Be(new je,()=>this.dynamicContextId,gi,bi),this._pluginAddedListener=this._plugins.added.addEventListener(t=>{t.initialize&&t.initialize(this)}),this._contentTreeClassRegistry=new Nr(H),this._contentTree=Pa(this),this._toolboxManager=new Ca,this._windowManager=new Xe,this._navbarManager=new tn}get plugins(){return this._plugins}get contentTree(){return this._contentTree}get contentTreeClassRegistry(){return this._contentTreeClassRegistry}get toolboxManager(){return this._toolboxManager}get windowManager(){return this._windowManager}get navbarManager(){return this._navbarManager}async _parseContext(t){const{config:e}=t;Array.isArray(e.plugins)&&(await Promise.all(e.plugins.map(async i=>{const s=await mi(this,i.name,i);return s?(vi(s.name)||Ra().warning(`plugin ${s.name} has no valid package name!`),s[kr]=t.id,s):null}))).filter(i=>i).map(i=>this._plugins.override(i)).filter(i=>i),await super._parseContext(t),await this._contentTree.parseItems(e.contentTree,t.id)}async _removeContext(t){await Promise.all([super._removeContext(t),this._plugins.removeContext(t),this._contentTree.removeContext(t)])}destroy(){this.windowManager.destroy(),this.navbarManager.destroy(),this._pluginAddedListener(),Ue(this._plugins),Ue(this._contentTree),this._contentTreeClassRegistry.destroy(),super.destroy()}}async function ja(n,t){g(n,String),lt(t,String);const e=new Da;if(new A({vuetify:Xn,i18n:hr,render:r=>r(Uo,{props:{appId:e.id}})}).$mount(n),t){const r=await fetch(t).then(s=>s.json()),i=new Vr(r);await e.addContext(i)}return e}var Wa=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e(ct,{staticStyle:{height:"100%"}},[n._v(" Statisches Window "),e(ct)],1)},Ba=[];const Ua={},vr={};var Ha=T(Ua,Wa,Ba,!1,Ga,null,null,null);function Ga(n){for(let t in vr)this[t]=vr[t]}var qa=function(){return Ha.exports}();class ye extends Z{static get className(){return"GroupContentTreeItem"}constructor(t,e){super(t,e);this._childWatcher=zt(this._children,()=>{const r=this._children.value;if(this.visible=r.some(i=>i.visible),r.every(i=>i.state===v.NONE))this.state=v.NONE;else{const i=r.filter(s=>s.state!==v.NONE);i.every(s=>s.state===v.ACTIVE)?this.state=v.ACTIVE:i.every(s=>s.state===v.INACTIVE)?this.state=v.INACTIVE:this.state=v.INDETERMINATE}},{deep:!0})}async clicked(){if(this.state===v.NONE)return;const t=this.state===v.ACTIVE?r=>r!==v.NONE:r=>r!==v.NONE&&r!==v.ACTIVE,e=this._children.value.filter(r=>r.visible&&t(r.state)).map(r=>r.clicked());await Promise.all(e)}destroy(){this._childWatcher(),super.destroy()}}H.registerClass(ye.className,ye);var za=function(){var n=this,t=n.$createElement,e=n._self._c||t;return n.items?e(ct,{staticClass:"pa-2"},[e("VcsSelect",{attrs:{items:n.items},model:{value:n.currentStyle,callback:function(r){n.currentStyle=r},expression:"currentStyle"}}),n.currentStyleLegend.length>0?e(Ge,n._l(n.currentStyleLegend,function(r,i){return e(qe,{key:"style-legend-"+i,attrs:{dense:""}},[e(zr,[e(Jr,{attrs:{color:r.color}})],1),e(ze,[n._v(" "+n._s(r.title)+" ")])],1)}),1):n._e()],1):n._e()},Ja=[],yc="";const Ya={name:"StyleSelector",components:{VcsSelect:Xr},props:{availableStyles:{type:Array,default:()=>[]},layerName:{type:String,required:!0}},setup({layerName:n,availableStyles:t}){const e=nt("vcsApp"),r=e.layers.getByKey(n),i=w(r.style.name),s=w([]),o=r.defaultStyle.name;function a(f){i.value=r.style.name,f.legend&&(s.value=f.legend)}a(r.style);const l=r.styleChanged.addEventListener(a);It(()=>{l()});const c=O({get(){return i.value},set(f){const h=f===o?r.defaultStyle:e.styles.getByKey(f);r.setStyle(h)}}),u=O(()=>[{text:"Default",value:o},...t.map(f=>({text:f,value:f}))]);return{currentStyle:c,currentStyleLegend:s,items:u}}},mr={};var Za=T(Ya,za,Ja,!1,Ka,"34299418",null,null);function Ka(n){for(let t in mr)this[t]=mr[t]}var Qa=function(){return Za.exports}();class vt extends Z{static get className(){return"VcsObjectContentTreeItem"}constructor(t,e){super(t,e);this._ownProperties={title:this.title,icon:this.icon,infoUrl:this.infoUrl},this._currentObjectProperties={}}_setProperties(t){this.title=t.title,this.icon=t.icon,this.infoUrl=t.infoUrl}setPropertiesFromObject(t){this._currentObjectProperties=t.properties;const e=E({},this._currentObjectProperties);Object.entries(this._ownProperties).forEach(([r,i])=>{i!==void 0&&(e[r]=i)}),this._setProperties(e)}toJSON(){const t=super.toJSON();return Object.entries(this._currentObjectProperties).forEach(([e,r])=>{t[e]&&t[e]===r&&this._ownProperties[e]!==r&&delete t[e]}),t}}H.registerClass(vt.className,vt);function we(n,t,e){const r="ViewPointAction";if(n.removeAction(r),e){const i=se({name:r,icon:"mdi-crosshairs-gps"},e,t.viewPoints,t.maps);n.addAction(i,2)}}function Se(n){return n.active?v.ACTIVE:n.loading?v.LOADING:v.INACTIVE}class Ee extends vt{static get className(){return"LayerContentTreeItem"}constructor(t,e){super(t,e);this.state=v.INACTIVE,this._layerName=t.layerName,this._listeners=[],this._setup()}get _layer(){return this._app.layers.getByKey(this._layerName)}_setStyleAction(t){const e="StyleSelector";if(this.removeAction(e),Array.isArray(t)){const{action:r,destroy:i}=rn({name:e,icon:"$vcsColorSwatch"},{component:Qa,props:K({availableStyles:t.slice(),layerName:this._layerName})},this._app.windowManager,q);this.addAction(r,4),this._listeners.push(i)}}_setLayerExtentAction(){const t="LayerExtentAction";if(this.removeAction(t),this._layer){const{extent:e}=this._layer.toJSON();if(e){const r=De.createViewPointFromExtent(this._layer.extent),i=se({name:"LayerExtentAction"},r,this._app.viewPoints,this._app.maps);this.addAction(i,8)}}}_setProperties(t){super._setProperties(t),this._setStyleAction(t.availableStyles),we(this,this._app,t.defaultViewpoint)}_clearListeners(){this._listeners.forEach(t=>{t()}),this._listeners.splice(0)}_setup(){this._clearListeners();const t=e=>{e.name===this._layerName&&this._setup()};this._layer?(this.visible=this._layer.isSupported(this._app.maps.activeMap),this.state=Se(this._layer),this._setLayerExtentAction(),this.setPropertiesFromObject(this._layer),this._listeners.push(this._app.layers.removed.addEventListener(t)),this._listeners.push(this._app.layers.added.addEventListener(t)),this._listeners.push(this._layer.stateChanged.addEventListener(()=>{this.state=Se(this._layer)})),this._listeners.push(this._app.maps.mapActivated.addEventListener(()=>{this.visible=this._layer.isSupported(this._app.maps.activeMap)}))):(this.visible=!1,this._listeners.push(this._app.layers.added.addEventListener(t)))}async clicked(){this._layer&&(this.state===v.INACTIVE?await this._layer.activate():this._layer.deactivate())}toJSON(){const t=super.toJSON();return t.layerName=this._layerName,t}destroy(){super.destroy(),this._clearListeners()}}H.registerClass(Ee.className,Ee);function gr(n){const t=n.map(e=>Se(e));return t.some(e=>e===v.LOADING)?v.LOADING:t.every(e=>e===v.INACTIVE)?v.INACTIVE:t.every(e=>e===v.ACTIVE)?v.ACTIVE:v.INDETERMINATE}class Te extends Z{static get className(){return"LayerGroupContentTreeItem"}constructor(t,e){super(t,e);this.state=v.INACTIVE,this._layerNames=Array.isArray(t.layerNames)?t.layerNames.slice():[],this._listeners=[],this._defaultViewpoint=t.defaultViewpoint||null,this._setup()}get _layers(){return this._layerNames.map(t=>this._app.layers.getByKey(t)).filter(t=>t)}_clearListeners(){this._listeners.forEach(t=>{t()}),this._listeners.splice(0)}_setup(){this._clearListeners();const t=r=>{this._layerNames.includes(r.name)&&this._setup()},e=this._layers;this.visible=e.some(r=>r.isSupported(this._app.maps.activeMap)),this.state=gr(e),we(this,this._app,this._defaultViewpoint),this._listeners.push(this._app.layers.removed.addEventListener(t)),this._listeners.push(this._app.layers.added.addEventListener(t)),e.forEach(r=>{this._listeners.push(r.stateChanged.addEventListener(()=>{this.state=gr(e)}))}),this._listeners.push(this._app.maps.mapActivated.addEventListener(()=>{this.visible=!!e.find(r=>r.isSupported(this._app.maps.activeMap))}))}async clicked(){const t=this._layers;t.some(r=>!(r.active||r.loading))?await Promise.all(t.map(r=>r.activate())):t.forEach(r=>{r.deactivate()})}toJSON(){const t=super.toJSON();return t.layerNames=this._layerNames.slice(),this._defaultViewpoint&&(t.defaultViewpoint=this._defaultViewpoint),t}destroy(){this._clearListeners(),super.destroy()}}H.registerClass(Te.className,Te);class $e extends Z{static get className(){return"NodeContentTreeItem"}constructor(t,e){super(t,e);this.clickable=!1,this._childWatcher=zt(this._children,()=>{const r=this._children.value;this.visible=r.some(i=>i.visible)},{deep:!0})}destroy(){this._childWatcher(),super.destroy()}}H.registerClass($e.className,$e);const Xa=new Pr({});class xe extends vt{static get className(){return"ObliqueCollectionContentTreeItem"}constructor(t,e){super(t,e);this.state=v.INACTIVE,this._collectionName=t.collectionName,this._listeners=[],this._setup()}get _collection(){return this._app.obliqueCollections.getByKey(this._collectionName)}_setProperties(t){super._setProperties(t),we(this,this._app,t.defaultViewpoint)}_clearListeners(){this._listeners.forEach(t=>{t()}),this._listeners.splice(0)}_setup(){this._clearListeners();const t=e=>{e.name===this._collectionName&&this._setup()};if(!this._collection)this.visible=!1,this._listeners.push(this._app.obliqueCollections.added.addEventListener(t));else{const e=this._app.maps.activeMap;e instanceof Ct?(this.visible=!0,this.state=e.collection===this._collection?v.ACTIVE:v.INACTIVE,this._listeners.push(e.collectionChanged.addEventListener(()=>{this.state=e.collection===this._collection?v.ACTIVE:v.INACTIVE}))):this.visible=!1,this.setPropertiesFromObject(this._collection),this._listeners.push(this._app.maps.mapActivated.addEventListener(()=>{this._setup()})),this._listeners.push(this._app.obliqueCollections.removed.addEventListener(t)),this._listeners.push(this._app.obliqueCollections.added.addEventListener(t))}}async clicked(){if(this.visible&&this._collection&&this._app.maps.activeMap instanceof Ct){const t=this._app.maps.activeMap,e=await t.getViewPoint();this.state===v.INACTIVE?(this.state=v.LOADING,await t.setCollection(this._collection,e)):this.state===v.ACTIVE&&(this.state=v.INACTIVE,await t.setCollection(Xa,e))}}toJSON(){const t=super.toJSON();return t.collectionName=this._collectionName,t}destroy(){this._clearListeners(),super.destroy()}}H.registerClass(xe.className,xe);class Ie extends vt{static get className(){return"ViewPointContentTreeItem"}constructor(t,e){t.icon=t.icon||"$vcsPoi";super(t,e);this._viewPointName=t.viewpointName,this._listeners=[],this._setup()}get viewPoint(){return this._app.viewPoints.getByKey(this._viewPointName)}_clearListeners(){this._listeners.forEach(t=>{t()}),this._listeners.splice(0)}_setup(){this._clearListeners();const t=e=>{e.name===this._viewPointName&&this._setup()};this.viewPoint?(this.visible=!0,this.setPropertiesFromObject(this.viewPoint),this._listeners.push(this._app.viewPoints.added.addEventListener(t)),this._listeners.push(this._app.viewPoints.removed.addEventListener(t))):(this.visible=!1,this._listeners.push(this._app.viewPoints.added.addEventListener(t)))}async clicked(){this._app.maps.activeMap&&this.viewPoint&&await this._app.maps.activeMap.gotoViewPoint(this.viewPoint)}toJSON(){const t=super.toJSON();return t.icon==="$vcsPoi"&&delete t.icon,t.viewpointName=this._viewPointName,t}destroy(){this._clearListeners(),super.destroy()}}H.registerClass(Ie.className,Ie);export{z as ButtonLocation,tn as ButtonManager,Z as ContentTreeItem,qa as EmptyCmpt,ye as GroupContentTreeItem,Ee as LayerContentTreeItem,Te as LayerGroupContentTreeItem,$e as NodeContentTreeItem,xe as ObliqueCollectionContentTreeItem,Gt as SubContentTreeItem,vt as VcsObjectContentTreeItem,Ie as ViewPointContentTreeItem,Xe as WindowManager,R as WindowPositions,C as WindowSlot,se as createGoToViewpointAction,sn as createLinkAction,en as createMapButtonAction,rn as createModalAction,nn as createToggleAction,ja as initApp,Xn as vuetify};
