import Logger from './logger.js';

/**
 * @type {Map<string, Logger>}
 */
export const loggers = new Map();

/**
 * @type {Logger}
 */
let defaultLogger;

/**
 * @returns {Logger}
 */
function getDefaultLogger() {
  if (!defaultLogger) {
    defaultLogger = new Logger();
  }
  return defaultLogger;
}

/**
 * creates new Logger
 * @param {string} className
 * @returns {Logger}
 */
function createLogger(className) {
  const logger = new Logger(className);
  loggers.set(className, logger);
  return logger;
}

/**
 * create Logger
 * @param {string=} name
 * @returns {Logger}
 */
export function getLogger(name) {
  if (!name) {
    return getDefaultLogger();
  }
  return loggers.has(name) ? loggers.get(name) : createLogger(name);
}
