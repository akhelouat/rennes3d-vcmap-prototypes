var d={},A=Array.prototype,y=Object.prototype,T=A.slice,Z=y.toString,b=y.hasOwnProperty,M=A.forEach,E=Object.keys,C=Array.isArray,i=function(){},G=i.each=i.forEach=function(e,n,t){if(e!=null){if(M&&e.forEach===M)e.forEach(n,t);else if(e.length===+e.length){for(var r=0,a=e.length;r<a;r++)if(n.call(t,e[r],r,e)===d)return}else for(var s=i.keys(e),r=0,a=s.length;r<a;r++)if(n.call(t,e[s[r]],s[r],e)===d)return}};i.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var n=[];for(var t in e)i.has(e,t)&&n.push(t);return n},i.defaults=function(e){return G(T.call(arguments,1),function(n){if(n)for(var t in n)e[t]===void 0&&(e[t]=n[t])}),e},i.isArray=C||function(e){return Z.call(e)==="[object Array]"},i.has=function(e,n){if(!i.isArray(n))return e!=null&&b.call(e,n);for(var t=n.length,r=0;r<t;r++){var a=n[r];if(e==null||!b.call(e,a))return!1;e=e[a]}return!!t};var O={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}},S={escape:new RegExp("["+i.keys(O.escape).join("")+"]","g")};i.each(["escape"],function(e){i[e]=function(n){return n==null?"":(""+n).replace(S[e],function(t){return O[e][t]})}}),i.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var h=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;i.template=function(e,n,t){var r;t=i.defaults({},t,i.templateSettings);var a=new RegExp([(t.escape||h).source,(t.interpolate||h).source,(t.evaluate||h).source].join("|")+"|$","g"),s=0,c="__p+='";e.replace(a,function(o,f,g,p,m){return c+=e.slice(s,m).replace(L,function(j){return"\\"+F[j]}),f&&(c+=`'+
((__t=(`+f+`))==null?'':_.escape(__t))+
'`),g&&(c+=`'+
((__t=(`+g+`))==null?'':__t)+
'`),p&&(c+=`';
`+p+`
__p+='`),s=m+o.length,o}),c+=`';
`,t.variable||(c=`with(obj||{}){
`+c+`}
`),c=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+c+`return __p;
`;try{r=new Function(t.variable||"obj","_",c)}catch(o){throw o.source=c,o}if(n)return r(n,i);var l=function(o){return r.call(this,o,i)};return l.source="function("+(t.variable||"obj")+`){
`+c+"}",l};var z=i,I=z,Q=I.template;function u(e,n,t){return Q(e,n,t)}u._=I;var D=u;(typeof window!="undefined"||typeof navigator!="undefined")&&(window.UnderscoreTemplate=u);const B="coordinateSearchPlugin",N={zIndex:30,vectorProperties:{altitudeMode:"relativeToGround",eyeOffset:[0,0,-100],heightAboveGround:10}},P=[],U=["<div class='balloon' id='myBalloon'>","<h1 class='balloon-title'><% if (typeof(obj.name) !== 'undefined') { %><%= obj.name %><% } %></h1>","<div class='balloon-content'>","<p class='balloon-text'><i class='fa fa-lg fa-globe'></i>&ensp;<b>WGS84 (lat/lon)</b>&ensp;<%= obj.pointWGS84 %></p>","<p class='balloon-text'><i class='fa fa-lg fa-map'></i>&ensp;<b><%= obj.epsg %></b>&ensp;<%= obj.pointProjected %></p>","</div>","   <div class='balloon-close-col'>","       <button class='close-balloon'><i class='fa fa-times fa-lg'></i></button>","   </div>","   <div class='dialog-image-balloon'></div>","   <div class='balloon-left-edge'></div>","</div>"],J="<% if (typeof(name) !== 'undefined') { %> <%= name %><% } %>",Y={de:{i18n_coordinateSearch_title:"Gesuchte Position",i18n_coordinateSearch_description:"Koordinate"},en:{i18n_coordinateSearch_title:"Searched Position",i18n_coordinateSearch_description:"coordinate"}};var R={name:B,layerOptions:N,searchProjections:P,balloonInfo:U,title:J,i18n:Y};const v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkIzODFDOEU1Mzk0MzExRTY5OUQ1QURCMUVEQTcyRjZFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkIzODFDOEU2Mzk0MzExRTY5OUQ1QURCMUVEQTcyRjZFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjM4MUM4RTMzOTQzMTFFNjk5RDVBREIxRURBNzJGNkUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjM4MUM4RTQzOTQzMTFFNjk5RDVBREIxRURBNzJGNkUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7k1vTOAAAIrUlEQVR42sxb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";function w(e){const n=Array.isArray(e)?e.join(""):e;return D(n)}class x{constructor(n){this._currentResults=[],this.searchProjections=[],n.searchProjections&&(this.searchProjections=n.searchProjections.map(s=>new vcs.vcm.util.Projection(s)));const t=Object.assign(R,n);t.layerOptions.style||(t.layerOptions.style={image:{src:v,scale:.5}},t.layerOptions.highlightStyle={image:{src:v}}),this.resultLayer=new vcs.vcm.layer.Vector(Object.assign(t.layerOptions,{projection:vcs.vcm.util.wgs84Projection})),this.title=w(t.title),this.description=w(vcs.vcm.i18n.getMessage("i18n_coordinateSearch_description"));const r=vcs.vcm.Framework.getInstance();r.addLayer(this.resultLayer);const a=r.getWidgetByType("vcs.vcm.widgets.BalloonInfo");a&&!a.hasTypeForLayerName(this.resultLayer.name)&&a.addTypeForLayer(this.resultLayer.name,t.balloonInfo,"balloonHeight + 30","70")}get currentResults(){return this._currentResults}search(n){const r=n.match(/\d*[,.]?\d*/g).map(a=>parseFloat(a)).filter(Number.isFinite).slice(0,2);if(r.length===2){const{projection:a}=vcs.vcm.Framework.getInstance();if(ol.extent.containsCoordinate(vcs.vcm.util.wgs84Projection.proj.getExtent(),r))this._handleSearch(r);else{const s=a.transformTo(vcs.vcm.util.wgs84Projection,r);this._handleSearch(s,r,a.epsg),this.searchProjections&&this.searchProjections.forEach(c=>{const l=c.transformTo(vcs.vcm.util.wgs84Projection,r);this._handleSearch(l,r,c.epsg)})}}}_handleSearch(n,t,r){const{projection:a}=vcs.vcm.Framework.getInstance(),s={name:vcs.vcm.i18n.getMessage("i18n_coordinateSearch_title"),pointWGS84:ol.coordinate.toStringHDMS(n),pointProjected:t||a.transformFrom(vcs.vcm.util.wgs84Projection,n).join(", "),epsg:r||a.epsg},c={pointWGS84:n,result:s,layerName:this.resultLayer.name,title:`${this.title(s)} ${r||"WGS84 (lat/lon)"}`,description:`${this.description(s)} ${t?t.join(", "):ol.coordinate.toStringHDMS(n)}`,icon:v};this._currentResults.push(new vcs.vcm.widgets.search.FeatureItem(c))}clear(){this._currentResults.splice(0),this.resultLayer.deactivate()}}const W="1.0.0";function H(e={}){Object.entries(Object.assign(R.i18n,e)).forEach(([n,t])=>{t instanceof Object&&Object.entries(t).forEach(([r,a])=>{vcs.vcm.i18n.setMessage(n,r,a)})})}var V={version:W,preInitialize:async()=>alert("test"),postInitialize:async e=>H(e.i18n),registerUiPlugin:async e=>({name:"coordinateSearchPlugin",search:{search:new x(e)}})};export{V as default};
